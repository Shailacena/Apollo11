!function(){"use strict";function n(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,o)}return e}function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t(n)}function e(n,t,e){return(t=function(n){var t=function(n,t){if("object"!=typeof n||null===n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var o=e.call(n,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==typeof t?t:String(t)}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function o(n){return(o="function"==typeof Symbol&&"symbol"==t(Symbol.iterator)?function(n){return t(n)}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":t(n)})(n)}function r(n){return function(n){if(Array.isArray(n))return a(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return a(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}var i,c,u,d=function(n){var t=["onreadystatechange","readyState","response","responseText","responseType","responseURL","responseXML","status","statusText","timeout","upload","withCredentials","abort","getAllResponseHeaders","getResponseHeader","open","overrideMimeType","send","setRequestHeader","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","addEventListener","removeEventListener","onabort","onerror","onload","onloadend","onloadstart","onprogress","ontimeout","dispatchEvent"],e=[],a=window.XMLHttpRequest;Object.defineProperty(window,"XMLHttpRequest",{value:function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}((function(){var i=this,c={},u=[],d=!1,l=function(l){for(var s,p=arguments.length,f=new Array(p>1?p-1:0),v=1;v<p;v++)f[v-1]=arguments[v];var y="object"===o(l.response)?l.response:JSON.parse(l.response),b=i.openProps[1].toString();if(n.urls.find((function(n){return new RegExp(n).test(b.toString())}))){var g=null===(s=y.body)||void 0===s?void 0:s.errorCode;if(y.waiting&&void 0!==n.hits.find((function(n){return y.code==="".concat(n)||g==="".concat(n)}))){var h,m=new Promise((function(n){h=n})),w=!1,x={stop:function(){var n;w=!0,u.forEach((function(n){return n.abort()})),null===(n=h)||void 0===n||n(!1)}};e.push(x);var j=n.chain({request:{params:b.split("?")[1],data:i.sendProps[0]},response:{data:y},handle:x,handles:e}),S=function(){e.splice(e.indexOf(x),1),j.done.apply(j,arguments)};return function e(){var s=w?Promise.resolve(!1):j.keep({response:{data:y}});Promise.race([s,m]).then((function(l){var s;if(!l||d||w)throw new Error("limiter callback");var p=new a;u.push(p),p.onreadystatechange=function(){for(var r,a,u=arguments.length,d=new Array(u),l=0;l<u;l++)d[l]=arguments[l];if(4===p.readyState&&200===p.status){var s="object"===o(p.response)?p.response:JSON.parse(p.response),f=null===(r=s.body)||void 0===r?void 0:r.errorCode;if(s.waiting&&void 0!==n.hits.find((function(n){return s.code==="".concat(n)||f==="".concat(n)})))e();else{try{S({response:{data:s},abort:!1})}catch(v){console.error("limiter done error",v)}t.forEach((function(n){var t=p[n];"function"!=typeof t&&(i["__".concat(n)]=t)})),null===(a=c.onreadystatechange)||void 0===a||a.call.apply(a,[p].concat(d)),setTimeout((function(){var n;null===(n=c.onloadend)||void 0===n||n.call.apply(n,[p].concat(d))}))}}},p.onabort=function(){var n;try{S({response:{data:y},abort:!0})}catch(a){console.error("limiter done error",a)}t.forEach((function(n){var t=p[n];"function"!=typeof t&&(i["__".concat(n)]=t)}));for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];null===(n=i.onabort)||void 0===n||n.call.apply(n,[p].concat(o))},p.onerror=function(){var n;try{S({response:{data:y},abort:!1})}catch(a){console.error("limiter done error",a)}t.forEach((function(n){var t=p[n];"function"!=typeof t&&(i["__".concat(n)]=t)}));for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];null===(n=i.onerror)||void 0===n||n.call.apply(n,[p].concat(o))},p.ontimeout=function(){var n;try{S({response:{data:y},abort:!1})}catch(a){console.error("limiter done error",a)}t.forEach((function(n){var t=p[n];"function"!=typeof t&&(i["__".concat(n)]=t)}));for(var e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];null===(n=i.ontimeout)||void 0===n||n.call.apply(n,[p].concat(o))},p.withCredentials=i.withCredentials,p.timeout=i.timeout,p.open.apply(p,r(i.openProps)),null===(s=i.setRequestHeaderProps)||void 0===s||s.forEach((function(n){p.setRequestHeader.apply(p,r(n))})),p.send.apply(p,r(i.sendProps))})).catch((function(){var n;try{S({response:{data:y},abort:!0})}catch(r){console.error("limiter done error",r)}t.forEach((function(n){var t=l[n];"function"!=typeof t&&(i["__".concat(n)]=t)})),null===(n=c.onreadystatechange)||void 0===n||n.call.apply(n,[l].concat(f)),setTimeout((function(){var n;null===(n=c.onloadend)||void 0===n||n.call.apply(n,[l].concat(f))}))}))}(),!0}}},s=new a;s.onreadystatechange=function(){for(var n,e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];if(4!==s.readyState||200!==s.status)return t.forEach((function(n){var t=s[n];"function"!=typeof t&&(i["__".concat(n)]=t)})),void(null===(e=c.onreadystatechange)||void 0===e||e.call.apply(e,[s].concat(r)));try{if(l.apply(void 0,[s].concat(r)))return}catch(u){console.error(u)}t.forEach((function(n){var t=s[n];"function"!=typeof t&&(i["__".concat(n)]=t)})),null===(n=c.onreadystatechange)||void 0===n||n.call.apply(n,[s].concat(r)),setTimeout((function(){var n;null===(n=c.onloadend)||void 0===n||n.call.apply(n,[s].concat(r))}))},t.forEach((function(n){Object.defineProperty(i,n,{get:function(){if("open"===n){var t=s.open;return function(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];i.openProps=e,t.call.apply(t,[s].concat(e))}}if("send"===n){var e=s.send;return function(){for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];i.sendProps=t,e.call.apply(e,[s].concat(t))}}if("setRequestHeader"===n){var o=s.setRequestHeader;return function(){i.setRequestHeaderProps=i.setRequestHeaderProps||[];for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];i.setRequestHeaderProps.push(t),o.call.apply(o,[s].concat(t))}}return"abort"===n?function(){s.abort.apply(s,arguments),d=!0,u.forEach((function(n){return n.abort()}))}:"function"==typeof s[n]?s[n].bind(s):void 0!==i["__".concat(n)]?i["__".concat(n)]:s[n]},set:function(t){"onreadystatechange"!==n&&"onloadend"!==n?s[n]=t:c[n]=t}})}))}))})},l=function(n){if(n&&n.urls&&n.hits&&n.chain)return function(n){var t=[],e=window.fetch;Object.defineProperty(window,"fetch",{value:function(n){function t(){return n.apply(this,arguments)}return t.toString=function(){return n.toString()},t}((function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];var i=r[0],c=i.url||i.toString(),u=e.apply(void 0,r);return n.urls.find((function(n){return new RegExp(n).test(c.toString())}))?u.then((function(o){return o.ok?o.json().then((function(a){var i,u,d=null==a||null===(i=a.body)||void 0===i?void 0:i.errorCode;if(!a.waiting||void 0===n.hits.find((function(n){return a.code==="".concat(n)||d==="".concat(n)})))return o;var l=new Promise((function(n){u=n})),s=!1,p={stop:function(){var n;s=!0,null===(n=u)||void 0===n||n(!1)}};t.push(p);var f=n.chain({request:{params:c.split("?")[1],data:r[0]},response:{data:a},handle:p,handles:t}),v=function(){t.splice(t.indexOf(p),1),f.done.apply(f,arguments)};return new Promise((function(t,i){!function c(){var u=s?Promise.resolve(!1):f.keep({response:{data:a}});Promise.race([u,l]).then((function(o){if(!o||s)throw new Error("limiter callback");e.apply(void 0,r).then((function(e){return e.ok?e.json().then((function(o){var r,a=null==o||null===(r=o.body)||void 0===r?void 0:r.errorCode;if(o.waiting&&void 0!==n.hits.find((function(n){return o.code==="".concat(n)||a==="".concat(n)})))c();else{try{v({response:o})}catch(i){console.error("limiter done error",i)}t(e)}})):t(e)})).catch((function(n){try{v({response:{data:n}})}catch(n){console.error("limiter done error",n)}i(n)}))})).catch((function(){try{v({response:{data:a}})}catch(n){console.error("limiter done error",n)}t(o)}))}()}))})).catch((function(){return o})):o})):u}))})}(n),d(n)},s=(c=[],navigator.sendBeacon&&window.addEventListener("beforeunload",(function(){i&&clearTimeout(i);var n=c.splice(0,c.length).map((function(n){return[n.biz,n.operation,n.code,0,n.message||""].join("|")})).join(",");n&&navigator.sendBeacon("https://wq.jd.com/webmonitor/collect/biz.json?contents=".concat(n,"&t=").concat(Date.now()))})),function(t){c.push(function(t){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?n(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}({biz:3064,code:"0"},t)),i&&clearTimeout(i),i=setTimeout((function(){var n=c.splice(0,c.length).map((function(n){return[n.biz,n.operation,n.code,0,n.message||""].join("|")})).join(","),t="https://wq.jd.com/webmonitor/collect/biz.json?contents=".concat(n,"&t=").concat(Date.now());navigator.sendBeacon?navigator.sendBeacon(t):(new Image).src=t}),1e3)});l({urls:["api.m.jd.com"],hits:[601],chain:function(n){var e=n.request,o=n.response,a=n.handles,i=o.data.times&&!Number.isNaN(o.data.times)?parseInt(o.data.times,10):void 0,c=(o.data.wait&&!Number.isNaN(o.data.wait)?parseInt(o.data.wait,10):void 0)||5,d=Math.floor(10*Math.random())%c+c,l=function(){try{var n;if(!e)return;if("object"===t(e.data)&&e.data.functionId)return e.data.functionId;var o="string"==typeof e.data?e.data:e.params;return null==o||null===(n=o.split("&").find((function(n){return 0===n.indexOf("functionId")})))||void 0===n?void 0:n.split("=")[1]}catch(r){console.error(r)}}(),p=document.body.style.overflow;if(1===a.length){document.body.style.overflow="hidden",u=function(n){var t,e,o,r,a,i,c=function(n,t){var e=document.createElement(n);return t&&Object.keys(t).forEach((function(n){e.style[n]=t[n]})),e},u=c("div",{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%",zIndex:"10000"}),d=c("div",{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)"});u.append(d);var l=c("div",{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"});u.append(l);var s=c("div",{width:"320px",padding:"32px",boxSizing:"border-box",justifyContent:"center",borderRadius:"12px",backgroundColor:"#ffffff",background:"linear-gradient(110deg, rgba(255, 244, 229, 1) 0%, rgba(255, 255, 255, 0) 50%), linear-gradient(180deg, rgba(255, 239, 251, 1) 0%, rgba(255, 255, 255, 0) 50%), linear-gradient(rgba(255, 255, 255, 1), rgba(255, 255, 255, 1))"});l.append(s);var p=c("div",{display:"flex",justifyContent:"center"});s.append(p);var f=c("div",{width:"100px",height:"100px",background:"url(https://img12.360buyimg.com/img/s265x240_jfs/t1/47183/38/18540/14986/642f84faF1e912af6/5bbac241eb487116.png) no-repeat center / 100%"});p.append(f);var v=c("div",{marginTop:"25px"});s.append(v);var y=c("div",{position:"relative",width:"60%",height:"6px",background:"rgba(255, 227, 226, 1)",borderRadius:"4px",margin:"0 auto",overflow:"hidden"});v.append(y);var b=c("div",{position:"absolute",width:"10%",height:"100%",left:"0px",background:"linear-gradient(90deg, rgba(255, 109, 138, 1) 0%, rgba(255, 33, 50, 1) 100%)",borderRadius:"4px",animation:"animate-positive 2s linear infinite"});y.append(b);var g=c("div",{fontSize:"18px",fontWeight:"600",color:"rgba(0,0,0,1)",textAlign:"center",marginTop:"20px"});g.append(n.title||"努力加载中，还请耐心等待"),v.append(g);var h=c("div",{fontSize:"14px",color:"rgba(140,140,140,1)",textAlign:"center",marginTop:"18px"});h.append(n.tips||"当前参与人数过多，先去看看优惠活动吧，加载结束后第一时间通知你"),v.append(h);var m=c("div",{display:"flex",justifyContent:"center",marginTop:"30px"});if(s.append(m),null!==(t=n.buttons)&&void 0!==t&&t.left){var w,x=c("div",{flex:"1",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid rgba(251,47,32,1)",borderRadius:"28px",background:"#fff",fontSize:"16px",fontWeight:"600",color:"rgba(251,47,32,1)",padding:"6px"});x.append(null===(w=n.buttons)||void 0===w?void 0:w.left.head),x.onclick=function(){var t,e,o=null===(t=n.buttons)||void 0===t||null===(e=t.left)||void 0===e?void 0:e.url;o&&(window.location.href=o)},m.append(x)}if(null!==(e=n.buttons)&&void 0!==e&&e.left&&null!==(o=n.buttons)&&void 0!==o&&o.right){var j=c("div",{width:"20px"});m.append(j)}if(null!==(r=n.buttons)&&void 0!==r&&r.right){var S,E=c("div",{flex:"1",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"28px",background:"linear-gradient(90deg, rgba(255,64,79,1) 0%,rgba(250,44,25,1) 100%)",fontSize:"16px",fontWeight:"600",color:"#fff",boxShadow:"inset 0 -2px 12px 0 rgba(255,255,255,0.6)",padding:"6px"});E.append(null===(S=n.buttons)||void 0===S?void 0:S.right.head),E.onclick=function(){var t,e,o=null===(t=n.buttons)||void 0===t||null===(e=t.right)||void 0===e?void 0:e.url;o&&(window.location.href=o)},m.append(E)}if(!(null!==(a=n.buttons)&&void 0!==a&&a.left||null!==(i=n.buttons)&&void 0!==i&&i.right)){var P=c("div",{display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid rgba(251,47,32,1)",borderRadius:"28px",background:"#fff",fontSize:"16px",fontWeight:"600",color:"rgba(251,47,32,1)",padding:"6px 40px"});P.append("不等了"),P.onclick=function(){window.history.back(),u.remove()},m.append(P)}var O=c("style");return O.append("\n        @keyframes animate-positive {\n            0% {\n                left: 0;\n            }\n            100% {\n                left: 100%;\n            }\n        }\n    "),document.body.append(O),document.body.append(u),u}({buttons:o.data.buttons,tips:o.data.tips});window.addEventListener("popstate",(function n(){window.removeEventListener("popstate",n),a.forEach((function(n){return n.stop()}))})),s({operation:300,message:l})}else s({operation:301,message:l});return{keep:function(){return void 0!==i&&--i<=0?Promise.resolve(!1):new Promise((function(n){setTimeout((function(){n(!0)}),1e3*d)}))},done:function(){var n;0===a.length&&(s({operation:302,message:l}),null===(n=u)||void 0===n||n.remove(),document.body.style.overflow=p)}}}})}();
