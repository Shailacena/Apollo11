!function(){"use strict";var n="m.jingdong.com"===window.location.host,t=/MicroMessenger/i.test(navigator.userAgent);navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux");var e=/qq\/([\d\.]+)*/i.test(navigator.userAgent);var o=n?"https://color.jingdong.com/api":"https://api.m.jd.com/api";var i={colorRequest:function(n,t,e,i,a){var c=new window.XMLHttpRequest;c.withCredentials=!0;var r,l=!1,s={method:"POST",url:o+"?"+(r={appid:n,functionId:t,client:"wh5",body:encodeURIComponent(JSON.stringify(e))},Object.keys(r).map((function(n){return n+"="+r[n]})).join("&")),async:!0};try{c.open(s.method,s.url,s.async),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.onreadystatechange=function(){if(4==c.readyState)if(200==c.status){var n=void 0;try{n=JSON.parse(c.responseText)}catch(n){return l=!0,void(a&&a())}i&&i(n)}else l||(l=!0,a&&a())},c.onerror=function(){l||(l=!0,a&&a())},c.send("{}")}catch(n){console.log("e",n)}}},a={mPing4Click:function(n,t,e){if(void 0===window.MPing);else try{var o=new window.MPing.inputs.Click(n);o.event_param=t||"",o.event_level=e?parseInt(e):"",(new window.MPing).send(o)}catch(n){console.log("埋点执行异常",n)}},mPing4Exposure:function(n){var t=new Image;n&&(t.src=n)}};function c(n,t,e){try{!function(n){try{i.colorRequest("jx_h5","pingou_webmonitor_biz",{contents:r(n),t:Math.random(),referer:location.href.split("#")[0]})}catch(n){}}({operation:n,result:t,message:e})}catch(n){}}function r(n){return[3182,n.operation,n.result,"0",encodeURIComponent(String(n.message||"").replace(/,/g," ")),n.traceId||"",n.perfTime||"",n.functionId||""].join("|")}var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var s={pin:"",forbidCommonFoot:!1,copyrightPeriod:"2004-2024",footContent:{app:{image:"//m.360buyimg.com/mobilecms/jfs/t16423/186/2517573622/5186/75a541f7/5ab1c0deN947bdcba.png"},intl:{image:"//m.360buyimg.com/mobilecms/jfs/t16090/145/2630217887/4548/251aa8bb/5ab46258Nfd600374.png",labelImage:"",panelData:{title:"选择站点",closeImage:"",selectImage:"",siteList:[]}},pc:{image:"//m.360buyimg.com/mobilecms/jfs/t14581/218/2689195961/4696/203b872a/5ab1c0f2N51c3f1bb.png"}}};function m(){!function(n,t){var e;if(n)(!window._loadCss||window._loadCss.indexOf(n)<0)&&((e=document.createElement("link")).setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e.setAttribute("id","loadCss"+Math.random()),document.getElementsByTagName("head")[0].appendChild(e),window._loadCss?window._loadCss+="|"+n:window._loadCss="|"+n),e&&"function"==typeof t&&(e.onload=t)}("//storage.jd.com/miniprogram-platform/m-sdk/footer.css"),i.colorRequest("m_common_sdk","mcommon_getFootInfo",{},(function(n){!function(n){try{if(!n||0!==n.code||0!==n.subCode||!n.data)throw Error("".concat(null==n?void 0:n.code,"-").concat(null==n?void 0:n.subCode,"接口请求异常，展示兜底数据"));return c(2,0,"成功"),d(n.data)}catch(n){console.log("数据处理异常了，展示兜底数据"),c(2,1,"失败：".concat(null==n?void 0:n.message)),d()}}(n)}),(function(){console.warn("common footer ajax error! "),c(2,1,"失败：接口调用失败"),d()}))}function d(o){var i=o||s,a=i.footContent,c=null==a?void 0:a.intl,r=null==c?void 0:c.panelData,m="Copyright © ".concat(i.copyrightPeriod||"2004-2024"," 京东").concat(n?"JINGDONG":"JD.com"," 版权所有"),d="",g="",f=i.pin||window._cookiePtPin;if(f)if(d='<a href="javascript: void(0)" clickUrl="https://passport.m.jd.com/user/login.action?"  ping-event-id="MCommonTail_Account">'.concat(f,"</a> "),t||e){var v=function(n){var t,e,o,i,a,c=n.length;for(e=0,t="";e<c;){if(o=255&n.charCodeAt(e++),e==c){t+=l.charAt(o>>2),t+=l.charAt((3&o)<<4),t+="==";break}if(i=n.charCodeAt(e++),e==c){t+=l.charAt(o>>2),t+=l.charAt((3&o)<<4|(240&i)>>4),t+=l.charAt((15&i)<<2),t+="=";break}a=n.charCodeAt(e++),t+=l.charAt(o>>2),t+=l.charAt((3&o)<<4|(240&i)>>4),t+=l.charAt((15&i)<<2|(192&a)>>6),t+=l.charAt(63&a)}return t}(encodeURIComponent(f)),h=encodeURIComponent(location.href),w="https://wqs.jd.com/my/unbind.shtml?unbind=1&sceneid=521194808&isWxOpenM=1&pin=".concat(v,"&rurl=").concat(h);g='<a href="javascript: void(0)" clickUrl="'.concat(w,'" ping-event-id="MCommonTail_Logout">退出</a>')}else{g='<a href="javascript: void(0)" clickUrl="'.concat(w="https://passport.m.jd.com/user/logout.action?sid=76bf31011e946d54fbc73006c094fee2",'" ping-event-id="MCommonTail_Logout">退出</a>')}else d='<a href="javascript: void(0)" clickUrl="https://plogin.m.jd.com/user/login.action?appid='.concat(n?"2322":"100",'&kpkey=&returnurl=https%3A%2F%2Fhome.m.jd.com%2FmyJd%2Fhome.action" ping-event-id="MCommonTail_Login">登录</a> '),g='<a href="javascript: void(0)" clickUrl="'.concat(w="https://plogin.m.jd.com/cgi-bin/mm/mreg?appid=461&returnurl=https%3A%2F%2Fhome.m.jd.com%2FmyJd%2Fhome.action&ipChanged=",'" ping-event-id="MCommonTail_Register">注册</a>');var C=!!r&&!!r.siteList&&r.siteList.length>0;!C&&c&&(c.image=s.footContent.intl.image);var b="";c&&c.labelImage&&C&&(b='<img src="'.concat(c.labelImage,'" class="conmmon-icon-item-paster">'));var y='<ul class="common-links">\n                        <li>'.concat(d,"</li>\n                        <li>").concat(g,'</li>\n                        <li><a href="javascript: void(0)" clickUrL="//wqs.jd.com/refund/help.shtml?channel=jd-m" ping-event-id="MCommonTail_FeedBack">客户服务</a></li>\n                        <li><a href="javascript: void(0)" ping-event-id="MCommonTail_BackToTop" onclick="window.scrollTo(0,0);" style="border-right: 1px solid transparent">返回顶部</a></li>\n                    </ul>\n                    ').concat(i.forbidCommonFoot?"":'<ul class="common-icons">\n                    <li>\n                        <a href="javascript: void(0)"  clickUrL="//h5.m.jd.com/active/download/download.html?channel=jd-m" ping-event-id="MCommonTail_ToApp">\n                            <img src="'.concat((null==a?void 0:a.app.image)||s.footContent.app.image,'" class="conmmon-icon-item">\n                        </a>\n                    </li>\n                    <li>\n                        <a href="javascript: void(0)" id="internationalSite" ping-event-id="MCommonTail_InterVersion">\n                            <img src="').concat((null==a?void 0:a.intl.image)||s.footContent.intl.image,'" class="conmmon-icon-item">').concat(b,' \n                        </a>\n                    </li>\n                    <li>\n                        <a href="javascript: void(0)"  clickUrL="//www.').concat(n?"jingdong.com":"jd.com",'/#m" ping-event-id="MCommonTail_ToPC">\n                            <img src="').concat((null==a?void 0:a.pc.image)||s.footContent.pc.image,'" class="conmmon-icon-item">\n                        </a>\n                    </li>\n                </ul>'),'\n                    <div class="common-copyright">').concat(m,"</div>"),j=document.getElementById("mCommonFooter");j?j.innerHTML=y:((j=document.createElement("div")).id="mCommonFooter",j.innerHTML=y,document.body.appendChild(j)),j.classList.add("m-common-footer");for(var k=document.querySelectorAll("#mCommonFooter li>a"),T=function(n,t){k[n].addEventListener("click",(function(){u(k[n])}))},A=0,L=k.length;A<L;A++)T(A);var M=document.getElementById("internationalSite");M&&r&&r.siteList&&r.siteList.length>0&&M.addEventListener("click",(function(){C&&function(n){for(var t=n.siteList,e="",o=0,i=t.length;o<i;o++)t[o].icon&&t[o].name&&t[o].jumpUrl&&(e+='<li class="site-list">\n        <div class="site-list-item">\n        <img src="'.concat(t[o].icon,'" alt="" class="site-list-item-flag">\n        <span class="site-list-item-name">').concat(t[o].name,'</span>\n        <a ref="javascript: void(0)" class="selected-icon-mask"  clickUrl="').concat(t[o].jumpUrl,'" ping-event-id="MCommonTail_ToastSiteEntrance">\n        <img src="').concat(n.selectImage,'" alt="" class="selected-icon">\n        </a>\n        </div>\n        </li>'));var a=document.createElement("div");a.id="footerCurtain",a.classList.add("m-common-footer-curtain");var c='<div class="m-common-footer-curtain-wrapper">\n    <div class="footer-curtain-wrapper-content" id="maskWrapperContent">\n    <div class="footer-curtain-wrapper-content-title">\n    <div class="curtain-title-name">'.concat(n.title?n.title:"可选站点",'</div>\n    <div class="curtain-title-close">\n    <img src="').concat(n.closeImage,'" alt="" id="footerBtnClose">\n    </div>\n    </div>\n    <ul class="footer-curtain-wrapper-content-body" id="footerSiteList">').concat(e,"</ul>\n    </div>\n    </div>");a.innerHTML=c,document.body.appendChild(a);var r=document.getElementById("footerCurtain");r&&r.addEventListener("click",(function(){p()}));var l=document.querySelector(".curtain-title-close");l&&l.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation()}));var s=document.getElementById("footerBtnClose");s&&s.addEventListener("click",(function(){p()}));var m=document.getElementById("maskWrapperContent");m&&(m.addEventListener("click",(function(n){n.preventDefault(),n.stopPropagation()})),m.style.marginTop=(window.screen.height-m.offsetHeight)/2+"PX");var d=document.querySelectorAll("#footerSiteList a"),g=function(n,t){d[n].addEventListener("click",(function(){u(d[n])}))};for(o=0,i=d.length;o<i;o++)g(o)}(r)}))}function p(){var n=document.getElementById("footerCurtain");n&&n.remove()}function u(t){var e=t.getAttribute("clickUrL"),o=t.getAttribute("ping-event-id"),i=escape(location.href);"MCommonTail_ToastSiteEntrance"==o&&(i=i+"_"+window.escape(t.getAttribute("clickurl"))),"MCommonTail_ToPC"==o&&function(n,t,e,o,i){var a=n+"="+escape(t);if(e){var c=new Date;c.setTime(c.getTime()+24*e*3600*1e3),a+=";expires="+c.toGMTString()}""!=o&&(a+=";path="+o),""!=i&&(a+=";domain="+i),document.cookie=a}("pcm","1",1,"/",n?".jingdong.com":".jd.com"),a.mPing4Click(o,i),setTimeout((function(){if(e){if(window.commonJumpToUrl)return void window.commonJumpToUrl(e);window.location.href=e}}),200)}console.log("version:0.0.1"),window.addEventListener("load",(function(){var n=navigator.userAgent;if(-1!=n.indexOf("jdmini")||-1!=n.indexOf("jdapp"))return!1;m()}))}();
