!function(){"use strict";var e="m.jd.com",t="m.jingdong.com",o=window.location.host===t,n=o?t:e;/MicroMessenger/i.test(navigator.userAgent);var r=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),i=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux")>-1;function a(){try{var t=function(e){var t="",o=[],n=new RegExp("^"+e+"=","ig");if(document.cookie)for(var r=0,i=(o=document.cookie.split(";")).length;r<i;r++)if(n.test(o[r].trim())){t=o[r].split("=")[1];break}return t}("mul_origin_home_url");if("m.jd.com"===t||"m.jingdong.com"===t)return"https://".concat(t)}catch(e){console.log(e)}return"https://".concat(e)}/qq\/([\d\.]+)*/i.test(navigator.userAgent);var c="4.0.0",d="//wq.360buyimg.com/js/common/dest/m.commonShare.min.js?v="+c,s={hrederId:"m_common_header",sid:""},l=[{display:!0,icon:"https://img10.360buyimg.com/img/jfs/t1/239219/19/1066/443/658a85eaF378ddb95/db1b35af7b1606f1.png",jumpUrl:"https://"+n,key:"index",name:"首页",reportEventId:"MCommonHead_home"},{display:!0,icon:"https://img30.360buyimg.com/img/jfs/t1/166832/8/35554/436/658a868bF6e96af4b/5be8456762f22292.png",jumpUrl:"https://minicaty-pro.pf.jd.com/index.html",key:"search",name:"分类搜索",reportEventId:"MCommonHead_CategorySearch"},{display:!0,icon:"https://img14.360buyimg.com/img/jfs/t1/230588/1/10340/340/658a89d5F1169eaa1/fbcef2698cfe3242.png",jumpUrl:"https://p.m.jd.com/cart/cart.action?fromnav=1",key:"cart",name:"购物车",reportEventId:"MCommonHead_Cart"},{display:!0,icon:"https://img12.360buyimg.com/img/jfs/t1/224624/34/10037/604/658a8a70F4b48e59d/df84b619ce6b75cf.png",jumpUrl:"https://my.m.jd.com",key:"home",name:"我的京东",reportEventId:"MCommonHead_MYJD"},{display:!0,icon:"https://img13.360buyimg.com/img/jfs/t1/240169/36/1060/579/658a8b97F352131fe/5e8d77ecf89b9925.png",jumpUrl:"https://gt.m.jd.com/?source=m",key:"footprint",name:"浏览记录",reportEventId:"MCommonHead_FootPrint"}];function h(e,t){if(e){if(document.referrer)return!0;if(t){var o=history.state;return!(!o||null==o)}return!1}return!0}function u(e,t){var o;h(e,t)?(o=window.location.href,/#top/.test(o)?window.history.go(-2):window.history.back()):window.location.href=a()}var m=!1;function f(){m||(m=!0,function(e,t){var o;if(e)(!window._loadCss||window._loadCss.indexOf(e)<0)&&((o=document.createElement("link")).setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",e),o.setAttribute("id","loadCss"+Math.random()),document.getElementsByTagName("head")[0].appendChild(o),window._loadCss?window._loadCss+="|"+e:window._loadCss="|"+e),o&&"function"==typeof t&&(o.onload=t)}("//storage.jd.com/miniprogram-platform/m-sdk/header.css"))}function p(){var e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e}function g(e,t,o){var n=document.getElementById(e);n&&n.addEventListener(t,o,!1)}function y(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?window.getComputedStyle(e,null)[t]:void e.style[t]}var b=o?"https://color.jingdong.com/api":"https://api.m.jd.com/api";var v={colorRequest:function(e,t,o,n,r){var i=new window.XMLHttpRequest;i.withCredentials=!0;var a,c=!1,d={method:"POST",url:b+"?"+(a={appid:e,functionId:t,client:"wh5",body:encodeURIComponent(JSON.stringify(o))},Object.keys(a).map((function(e){return e+"="+a[e]})).join("&")),async:!0};try{i.open(d.method,d.url,d.async),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var e=void 0;try{e=JSON.parse(i.responseText)}catch(e){return c=!0,void(r&&r())}n&&n(e)}else c||(c=!0,r&&r())},i.onerror=function(){c||(c=!0,r&&r())},i.send("{}")}catch(e){console.log("e",e)}}};function w(e,t,o){try{_({operation:e,result:t,message:o})}catch(e){}}function _(e){try{v.colorRequest("jx_h5","pingou_webmonitor_biz",{contents:j(e),t:Math.random(),referer:location.href.split("#")[0]})}catch(e){}}function j(e){return[3182,e.operation,e.result,"0",encodeURIComponent(String(e.message||"").replace(/,/g," ")),e.traceId||"",e.perfTime||"",e.functionId||""].join("|")}var k,C={},S=["Z","A","B","C","D","E","F","G","H","I"];function I(e,t){var o=!1,n=document.createElement("script");function r(){n&&(n.onload=n.onreadystatechange=n.onerror=null,n.parentNode&&n.parentNode.removeChild(n),n=null)}t=t||{},n.charset=t.charset||"utf-8",n.onload=n.onreadystatechange=function(){(/loaded|complete/i.test(this.readyState)||-1==navigator.userAgent.toLowerCase().indexOf("msie"))&&(t.onLoad&&t.onLoad(),o||(t.onError&&t.onError(),window.onerror&&window.onerror("","","","",{stack:"servererror:"+(e||"").split("?")[0]})),r())},n.onerror=function(){window.__reloadResource&&window.__reloadResource(n),t.onError&&t.onError(),r()},e=function(e){var t,n,r,i=e.replace(/callback=([^&]+)/,(function(e,o){return"callback="+(n=function(e){C[e]?C[e]+=1:C[e]=1;return e+function(e){for(var t=(e+"").split(""),o=[],n=0;n<t.length;n++)o.push(S[t[n]]);return o.join("")}(C[e])}(t=o))}));t&&window[t]?(e=i,r=window[t],window[n]=function(e){o=!0,r(e)}):o=!0;return e}(e),n.src=e,t.defer&&(n.defer="defer"),t.async&&(n.async="async"),t.crossorigin&&n.setAttribute("crossorigin","true"),document.getElementsByTagName("head")[0].appendChild(n)}!function(e){e[e.DEFAULT=1]="DEFAULT",e[e.IMMER=2]="IMMER"}(k||(k={}));var B=new(function(){function e(){Object.defineProperty(this,"headStype",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"canImmerseScroll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"commonShare",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showGobackBtn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showShortCutBtn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showShortCutLeftBtn",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"leftBtnInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"navList",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headReferHref",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headHistoryState",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fromKepler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.headStype=1,this.canImmerseScroll=!0,this.config=s,this.showGobackBtn=!0,this.showShortCutBtn=!0,this.showShortCutLeftBtn=!1,this.navList=l,this.headReferHref=!0,this.headHistoryState=!0,this.init()}return Object.defineProperty(e.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.navList=l,this.headReferHref=!0,this.headHistoryState=!0}}),Object.defineProperty(e.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e){try{if(this.config=e,this.showGobackBtn=void 0===e.isShowGobackUrl||!!e.isShowGobackUrl,this.showShortCutBtn=void 0===e.isShowShortCutButton||!!e.isShowShortCutButton,this.config.sid=(t="?",o=this.config.sid,(n=o)&&""!=n?t+"sid="+o:""),this.headStype=e.stype||k.DEFAULT,this.isHideHeader())return;this.requestHeadData()}catch(e){this.showNoDataHtml(),w(98,0,"公共头执行异常：".concat(null==e?void 0:e.message))}var t,o,n}}),Object.defineProperty(e.prototype,"requestHeadData",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t={},o=this.config.moduleName,n=this.config.isShowGobackUrl,r=this.config.isShowShortCutButton;void 0!==o&&(t.from=o),void 0!==n&&(t.isShowGobackUrl=n),void 0!==r&&(t.isShowShortCutButton=r),v.colorRequest("m_common_sdk","mcommon_getHeaderInfo",t,(function(t){if(!t||0!==t.code||0!==t.subCode||!t.data)return w(1,1,"失败：".concat(null==t?void 0:t.code,"-").concat(null==t?void 0:t.subCode)),e.showNoDataHtml();var o=t.data||{};if(o.forbidCommonHeader)return e.hideHeader();e.fromKepler=o.fromKepler,e.headReferHref=o.headReferHref,e.headHistoryState=o.headHistoryState,o.navList&&o.navList.length&&(e.navList=o.navList),e.showGobackBtn=o.showGobackBtn,e.showShortCutBtn=o.showShortCutBtn,e.leftBtnInfo=o.leftBtnInfo,e.showShortCutLeftBtn=o.showShortCutLeftBtn,e.showHtml(),w(1,0,"成功")}),(function(){w(1,1,"失败：接口error"),e.showNoDataHtml()}))}}),Object.defineProperty(e.prototype,"showNoDataHtml",{enumerable:!1,configurable:!0,writable:!0,value:function(){console.log("头部数据处理异常，走兜底逻辑"),this.init(),this.showHtml()}}),Object.defineProperty(e.prototype,"showHtml",{enumerable:!1,configurable:!0,writable:!0,value:function(){try{var e=this.getTemplateHeadHtml();this.addWindowMask();var t=document.getElementById(this.config.hrederId);t&&(t.innerHTML=e),this.addEventClick();try{this.config.isPersonalise&&this.config.isPersonalise(),this.config.call&&this.config.call()}catch(e){}}catch(e){w(98,0,"公共头模板渲染：".concat(null==e?void 0:e.message))}}}),Object.defineProperty(e.prototype,"getTemplateHeadHtml",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=!1,t=navigator.userAgent,o="",n=window.location.href.split("?"),r=n[0],i=n[0],c=navigator.userAgent.indexOf("jdmsxh"),s=navigator.userAgent.indexOf("jdmsxh2"),l=h(this.headReferHref,this.headHistoryState);t.indexOf("baiduboxapp")>0&&t.indexOf("light")>0&&(e=!0);var u=l?"MCommonHead_Back":"MCommonHead_TopHomeIcon",m=this.navList,f=this.headStype==k.IMMER?"jd-header-immerse jd-header-op0":"",p='<header class="jd-header '.concat(f,'"><div class="jd-header-new-bar" id="jd_header_new_bar">'),g=e?"":'<div report-eventid="'.concat(u,'" report-eventparam="').concat(i,'" id="').concat(this.config.hrederId,'_goback" class="jd-header-icon-back ').concat(l?"":"back_home",' J_ping"><span></span></div>'),y='<div class="jd-header-new-title">'.concat(this.config.title||"","</div>"),b="";this.showShortCutLeftBtn&&this.leftBtnInfo&&this.leftBtnInfo.jumpUrl&&this.leftBtnInfo.icon&&(b=this.showShortCutBtn&&m&&m.length>0?'<a class="J_ping jd-header-personalise-icon" report-eventid="'.concat(this.leftBtnInfo.reportEventId,'" report-eventparam="').concat(i,'" style="background:url(\'').concat(this.leftBtnInfo.icon,'\') no-repeat center center;background-size:20px" href="').concat(this.leftBtnInfo.jumpUrl,'"></a>'):'<a class="J_ping jd-header-personalise-icon" report-eventid="'.concat(this.leftBtnInfo.reportEventId,'" report-eventparam="').concat(i,'" style="background:url(\'').concat(this.leftBtnInfo.icon,'\') no-repeat center center;background-size:20px;position:absolute;top:12px;right:12px;" href="').concat(this.leftBtnInfo.jumpUrl,'"></a>'));for(var v=e?"":'<div report-eventid="MCommonHead_NavigateButton" report-eventparam="'.concat(i,'" id="').concat(this.config.hrederId,'_jdkey" class="jd-header-icon-new-shortcut J_ping"><span></span></div>'),w='<ul id="'.concat(this.config.hrederId,'_shortcut" class="jd-header-vertical-shortcut" style="display: none">'),_=0;_<m.length;_++)if(m[_].display&&m[_].icon&&m[_].jumpUrl&&m[_].name&&m[_].key){var j="";r=m[_].reportEventId||n[0];var C=m[_].reportEventId||"";switch(m[_].key){case"index":j="m_index",m[_].jumpUrl=a();break;case"search":j="category_search",m[_].jumpUrl+="?searchFrom=header";break;case"cart":j="p_cart";break;case"home":j="h_home";break;case"footprint":j="h_footprint";break;case"myfocus":j="h_myfocus";break;default:j="m_"+m[_].key}var S=m[_].jumpUrl;w+='<li id="'.concat(this.config.hrederId,"_shortcut_").concat(j,'">\n                <a class="J_ping" report-eventid="').concat(C,'"  report-eventparam="').concat(r,'" href="').concat(S,'">\n                <span class="shortcut-').concat(m[_].key,'" style="background: url(\'').concat(m[_].icon,"') no-repeat center center;background-size: 15px\"></span>\n                <strong>").concat(m[_].name,"</strong>\n                </a>\n                </li>")}if(this.config.showShare&&this.config.shareConfig)if(w+='<li id="m_common_header_shortcut_h_share">\n                          <a class="J_ping" report-eventid="MCommonHead_Share" report-eventparam="'.concat(r,'" href="javascript:">\n                              <span class="shortcut-share"></span>\n                              <strong>分享</strong>\n                          </a></li>'),window.JD&&window.JD.M&&window.JD.M.CommonShare)this.commonShare=new window.JD.M.CommonShare("commonShare",this.config.shareConfig);else{var B=this;I(d,{crossorigin:!0,onLoad:function(){if(window.JD&&window.JD.M&&window.JD.M.CommonShare)B.commonShare=new window.JD.M.CommonShare("commonShare",B.config.shareConfig);else{var e=document.getElementById("m_common_header_shortcut_h_share");e&&e.parentNode&&e.parentNode.removeChild(e)}},onError:function(){var e=document.getElementById("m_common_header_shortcut_h_share");e&&e.parentNode&&e.parentNode.removeChild(e)}})}w+="</ul>";if(c>=0&&c!=s&&(this.showShortCutBtn=!1),o=p,this.showGobackBtn&&(o+=g),o+=y,b&&(o+=b),this.showShortCutBtn&&m&&m.length>0&&(o+=v),o+="</div>",m&&m.length>0){var H=document.createElement("div");H.id="header-shortcut-ul",H.innerHTML=w,document.body.appendChild(H)}return o+="</header>"}}),Object.defineProperty(e.prototype,"addEventClick",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=e.config.hrederId,o=document.querySelector("#header-mask");if(e.fromKepler){if(r||i){var n=document.createElement("script"),a="//ebsnew.boc.cn/bocphone/BocMerchant/";r?n.src=a+"paylib/ios.js":i&&(n.src=a+"paylib/android.js"),n.src&&document.getElementsByTagName("head")[0].appendChild(n),document.addEventListener("deviceready",(function(){g(t+"_goback","click",(function(){window.c_plugins&&window.c_plugins.merchantBridge&&window.c_plugins.merchantBridge.goToNative((function(){}),(function(){}),{page:"0"})}))}))}}else g(t+"_goback","click",(function(){e.config.gobackUrl?window.location.href=e.config.gobackUrl:(e.config.onClickGoback&&e.config.onClickGoback(),u(e.headReferHref,e.headHistoryState))}));function c(){var e=document.getElementById(t+"_shortcut");e&&("block"!=e.style.display&&""!=e.style.display||(e.style.display="none",o&&(o.style.display="none")))}g(t+"_jdkey","click",(function(){e.config.onClickJdkey&&e.config.onClickJdkey(),e.shortCutShowHide(),o&&"none"==o.style.display&&(o.style.display="")})),g(t+"_shortcut_m_index","click",(function(){e.config.onClickIndex&&e.config.onClickIndex()})),g(t+"_shortcut_category_search","click",(function(){e.config.onClickSearch&&e.config.onClickSearch})),g(t+"_shortcut_p_cart","click",(function(){e.config.onClickCart&&e.config.onClickCart()})),g(t+"_shortcut_h_home","click",(function(){e.config.onClickHome&&e.config.onClickHome()})),g(t+"_shortcut_h_footprint","click",(function(){e.config.onClickFootprint&&e.config.onClickFootprint()})),g(t+"_shortcut_h_myfocus","click",(function(){e.config.onClickMyfocus&&e.config.onClickMyfocus()})),e.config.showShare&&g(t+"_shortcut_h_share","click",(function(){try{e.commonShare.show(),c()}catch(e){}})),e.config.delayImmerseScroll&&e.config.delayImmerseScroll>0&&(e.canImmerseScroll=!1,window.setTimeout((function(){e.canImmerseScroll=!0}),e.config.delayImmerseScroll)),window.addEventListener("scroll",(function(){c(),e.immerseChange()})),o&&o.addEventListener("click",(function(){o.style.display="none";var e=document.getElementById(t+"_shortcut");e&&""==e.style.display&&(e.style.display="none")}))}}),Object.defineProperty(e.prototype,"addWindowMask",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!document.querySelector("header-mask")){var e=document.createElement("div");e.id="header-mask",e.style.display="none",document.body.appendChild(e)}}}),Object.defineProperty(e.prototype,"shortCutShowHide",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this,t=document.getElementById(e.config.hrederId+"_shortcut");if(t)if("none"==t.style.display){if(document.querySelector(".jd-header-new-bar")&&document.getElementById(e.config.hrederId+"_shortcut")){var o=document.getElementById(e.config.hrederId);if(o&&"DIV"!==o.tagName){var n=o.getBoundingClientRect().top+53;(r=document.getElementById(e.config.hrederId+"_shortcut"))&&(r.style.cssText="position: absolute;top: "+n+"px;right: 10px;")}else{var r,i=o?o.offsetTop:0;n=e.getFixedAndTop(!0).top+i+53;(r=document.getElementById(e.config.hrederId+"_shortcut"))&&(r.style.cssText="position: absolute;top: "+n+"px;right: 10px;")}}!function(e){e&&(e.style.display="")}(t)}else!function(e){e&&(e.style.display="none")}(t)}}),Object.defineProperty(e.prototype,"getFixedAndTop",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=0,o=document.getElementById(this.config.hrederId),n="";if(o){var r=function(e){for(;e&&e!==document.body;){var t=y(e,"position");if("fixed"==t||"absolute"==t)return{pos:t,ele:e};e=e.parentNode}return null}(o);if(r){n=r.pos;var i=y(r.ele,"top");i&&(t=1*(i=i.replace(/px$/i,""))),"fixed"==n&&e&&(t+=p())}}return{pos:n,top:t}}}),Object.defineProperty(e.prototype,"setStype",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.headStype=e,this.headStype==k.IMMER)this.immerseChange();else{var t=document.getElementById("jd_header_new_bar");t&&t.parentNode&&((t=t.parentNode).className="jd-header")}}}),Object.defineProperty(e.prototype,"immerseChange",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(2==this.headStype&&this.canImmerseScroll){var e=p(),t=document.getElementById("jd_header_new_bar");if(t&&t.parentNode){t=t.parentNode;var o="jd-header jd-header-op0";e<0&&(e=0),e<100?o="jd-header jd-header-immerse jd-header-op"+parseInt(e/20,10):e<200&&(o="jd-header jd-header-op"+parseInt(e/20,10)),t.className=o}}}}),Object.defineProperty(e.prototype,"isHideHeader",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=navigator.userAgent;return(!document.getElementById(this.config.hrederId)||-1!=e.indexOf("jdmini")||-1!=e.indexOf("jdapp"))&&(this.hideHeader(),!0)}}),Object.defineProperty(e.prototype,"hideHeader",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=document.getElementById(this.config.hrederId);e&&(e.style.cssText="min-height: 0; height: 0;overflow: hidden;"),this.config.onHiddenHeader&&this.config.onHiddenHeader()}}),e}());console.log("新版头部version:0.0.11"),window.MCommonHeaderBottom=function(){return f(),{version:c,header:function(e){B.create(e)},getCommonShare:function(){return B.commonShare},setHeaderStype:function(e){B.setStype(e)},platformEnum:function(){return console.log("待移除"),_({operation:99,result:1,message:"header.platformEnum"}),{}},bottom:function(){_({operation:99,result:2,message:"header.bottom"}),console.log("待移除")},jdTip:function(){_({operation:99,result:3,message:"header.jdTip"}),console.log("待移除")},jdTipNew:function(){_({operation:99,result:4,message:"header.jdTipNew"}),console.log("待移除")}}},setTimeout((function(){try{window.MPing.inputs.Click.attachEvent()}catch(e){}}),100)}();
