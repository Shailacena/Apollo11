!function(){"use strict";var o="m.jingdong.com"===window.location.host;/MicroMessenger/i.test(navigator.userAgent),navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux"),/qq\/([\d\.]+)*/i.test(navigator.userAgent);var t=o?"https://color.jingdong.com/api":"https://api.m.jd.com/api";var n,e,i={colorRequest:function(o,n,e,i,a){var r=new window.XMLHttpRequest;r.withCredentials=!0;var c,d=!1,s={method:"POST",url:t+"?"+(c={appid:o,functionId:n,client:"wh5",body:encodeURIComponent(JSON.stringify(e))},Object.keys(c).map((function(o){return o+"="+c[o]})).join("&")),async:!0};try{r.open(s.method,s.url,s.async),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){var o=void 0;try{o=JSON.parse(r.responseText)}catch(o){return d=!0,void(a&&a())}i&&i(o)}else d||(d=!0,a&&a())},r.onerror=function(){d||(d=!0,a&&a())},r.send("{}")}catch(o){console.log("e",o)}}};!function(o){o.INDEX="index",o.CATEGORY="category",o.CART="cart",o.HOME="home"}(n||(n={}));var a={forbidCommonBottomNavigation:!1,bgColor:"#fff",logined:!1,iconList:[{navIcon:{active:"https://img11.360buyimg.com/jdphoto/s130x100_jfs/t1/67550/26/12426/5094/5d9c4b13Eea435a3f/81328b0609c60a3c.png",def:"https://img11.360buyimg.com/jdphoto/s130x100_jfs/t1/81741/30/12345/4140/5d9c4b13E726f0a1e/82c582e7c375e4b3.png"},navId:n.INDEX,navUrl:"https://m.jd.com"},{navIcon:{active:"https://img11.360buyimg.com/jdphoto/s130x100_jfs/t1/48787/24/12910/3390/5d9c4b12Ee63270e4/4481f5b3dbad979d.png",def:"https://img11.360buyimg.com/jdphoto/s130x100_jfs/t1/56507/6/12787/3168/5d9c4b12Ef363dd8d/4af32f42575509d8.png"},navId:n.CATEGORY,navUrl:"https://minicaty-pro.pf.jd.com/index.html?swbr=1"},{navIcon:{active:"https://img11.360buyimg.com/jdphoto/s130x100_jfs/t1/45205/32/12889/3890/5d9c4b12E7bc2c425/dd60fafbde8542ca.png",def:"https://img11.360buyimg.com/jdphoto/s130x100_jfs/t1/64954/4/12406/3529/5d9c4b12Ee7a82735/f2fe0a88bf344736.png"},navId:n.CART,navUrl:"https://p.m.jd.com/cart/cart.action?fromnav=1"},{navIcon:{active:"https://m.360buyimg.com/mobilecms/jfs/t17950/16/2476630334/3955/36c9ce38/5af43af1N96d4474e.png",def:"https://img12.360buyimg.com/img/s130x100_jfs/t1/203343/14/10880/3097/61641568E184a8e0b/4522f6ec5bb9b10b.png"},navId:n.HOME,navUrl:"https://my.m.jd.com/"}]},r=((e={})[n.HOME]="MCommonBottom_My",e[n.CATEGORY]="MCommonBottom_Category",e[n.CART]="MCommonBottom_Cart",e[n.INDEX]="MCommonBottom_Home",e),c=function(o,t,n){if(void 0===window.MPing);else try{var e=new window.MPing.inputs.Click(o);e.event_param=t||"",e.event_level=n?parseInt(n):"",(new window.MPing).send(e)}catch(o){console.log("埋点执行异常",o)}};function d(o,t,n){try{!function(o){try{i.colorRequest("jx_h5","pingou_webmonitor_biz",{contents:s(o),t:Math.random(),referer:location.href.split("#")[0]})}catch(o){}}({operation:o,result:t,message:n})}catch(o){}}function s(o){return[3182,o.operation,o.result,"0",encodeURIComponent(String(o.message||"").replace(/,/g," ")),o.traceId||"",o.perfTime||"",o.functionId||""].join("|")}function m(){try{var o=function(o){var t="",n=[],e=new RegExp("^"+o+"=","ig");if(document.cookie)for(var i=0,a=(n=document.cookie.split(";")).length;i<a;i++)if(e.test(n[i].trim())){t=n[i].split("=")[1];break}return t}("mul_origin_home_url");if("m.jd.com"===o||"m.jingdong.com"===o)return"https://".concat(o)}catch(o){console.log(o)}return"https://".concat("m.jd.com")}console.log("version:0.0.1"),window.global_is_first_load_homepage=0,window.global_find_img=null,window.global_isWaiting=!1,window.global_curtains_version="",(new(function(){function o(){Object.defineProperty(this,"option",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isJdPgApp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.option=a,this.isJdPgApp=/jdpingou/.test(navigator.userAgent.toLowerCase())}return Object.defineProperty(o.prototype,"init",{enumerable:!1,configurable:!0,writable:!0,value:function(){try{var o=this,t=navigator.userAgent;if(-1!=t.indexOf("jdmini")||-1!=t.indexOf("jdapp"))return!1;!function(o,t){var n;if(o)(!window._loadCss||window._loadCss.indexOf(o)<0)&&((n=document.createElement("link")).setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",o),n.setAttribute("id","loadCss"+Math.random()),document.getElementsByTagName("head")[0].appendChild(n),window._loadCss?window._loadCss+="|"+o:window._loadCss="|"+o),n&&"function"==typeof t&&(n.onload=t)}("//storage.jd.com/miniprogram-platform/m-sdk/footnav.css"),i.colorRequest("m_common_sdk","mcommon_getBottomNavigationInfo",{},(function(t){o.translateResponse(t)}),(function(){console.warn("common footer ajax error! "),d(3,1,"失败：接口调用失败"),o.showHtml()}))}catch(o){d(98,0,"底部导航加载异常：".concat(null==o?void 0:o.message)),self.showHtml()}}}),Object.defineProperty(o.prototype,"translateResponse",{enumerable:!1,configurable:!0,writable:!0,value:function(o){try{if(!o||0!==o.code||0!==o.subCode||!o.data||!o.data.iconList)throw Error("".concat(null==o?void 0:o.code,"-").concat(null==o?void 0:o.subCode,"接口请求异常，展示兜底数据"));if(this.option=o.data,this.option.forbidCommonBottomNavigation&&void 0!==window.commonNavCallback)return console.warn(">>> hidden commonNav."),void window.commonNavCallback();d(3,0,"成功")}catch(o){console.log("数据处理异常了，展示兜底数据"),d(3,1,"失败：".concat(null==o?void 0:o.message))}this.showHtml()}}),Object.defineProperty(o.prototype,"showHtml",{enumerable:!1,configurable:!0,writable:!0,value:function(){var o,t,e=this.option.iconList||[];if(e.length){for(var i=100/e.length+"%",a="",c=0;c<e.length;c++){var d=e[c],s=d.navIcon.def,l=d.navUrl,g=!1;(0==l.indexOf("https://"+window.location.host)||0==l.indexOf("http://"+window.location.host)||d.navId===(o=void 0,t=void 0,o={"m.jingdong.com":n.INDEX,"m.jd.com":n.INDEX,"staticbeta.m.jd.com":n.INDEX,"beta-m.m.jd.com":n.INDEX,"so.m.jd.com":n.CATEGORY,"/wxsq_project/portal/m_category/index.shtml":n.CATEGORY,"minicaty-pro.pf.jd.com":n.CATEGORY,"p.m.jd.com":n.CART,"plogin.m.jd.com":n.HOME,"home.m.jd.com":n.HOME,localhost:n.HOME,"localhost:8080":n.HOME,"my.m.jd.com":n.HOME},void 0===(t=o[location.host])&&(t=o[location.pathname]),t))&&(g=!0),d.navId===n.INDEX&&(l=m()),g&&(l="javascript:void(0)",s=d.navIcon.active);var p=r[d.navId];d.navId===n.HOME&&0==this.option.logined&&(p="MCommonBottom_NotLogin"),a+='<a \n                          style="width: '.concat(i,'" \n                          href="').concat(l,'" \n                          class="J_ping" report-eventid="').concat(p,'">\n                          <div class="icon-center">\n                              <img class="nav-img" src="').concat(s,'" />\n                             </div>\n                      </a>')}var u=document.createElement("div");u.id="commonNav",u.style.backgroundColor=this.option.bgColor,u.style.paddingBottom="constant(safe-area-inset-bottom)",u.style.paddingBottom="env(safe-area-inset-bottom)",u.innerHTML=a,document.body.appendChild(u),this._sendPingData(),this._compatibleIphoneX()}}}),Object.defineProperty(o.prototype,"_sendPingData",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var o=document.querySelectorAll("#commonNav .J_ping"),t=function(t,n){var e=o[t];e.addEventListener("click",(function(o){o.stopPropagation(),o.preventDefault();try{c(e.getAttribute("report-eventid"),location.href.split("?")[0],"")}catch(o){console.log("上报异常")}setTimeout((function(){window.commonJumpToUrl?window.commonJumpToUrl(e.href):location.href=e.href}),200)}))},n=0,e=o.length;n<e;n++)t(n)}}),Object.defineProperty(o.prototype,"_compatibleIphoneX",{enumerable:!1,configurable:!0,writable:!0,value:function(){window.global_current_viewportHeight=window.innerHeight;var o=!(!/iPad|iPhone|iPod/.test(navigator.userAgent)||window.MSStream||!(414==window.screen.width&&896===window.screen.height||375==window.screen.width&&812===window.screen.height));o&&this.isJdPgApp&&(window.global_bottom_bar_pannel=document.querySelector("#commonNav"),window.global_bottom_bar_pannel.style.height="70PX"),o&&(navigator.userAgent.indexOf("Safari")>-1||navigator.userAgent.indexOf("keplerm")>-1)&&window.addEventListener("scroll",(function(){window.global_bottom_bar_pannel=document.querySelector("#commonNav"),window.innerHeight>window.global_current_viewportHeight?window.global_bottom_bar_pannel.style.height="70PX":(window.global_bottom_bar_pannel.style.transition=".3s",window.global_bottom_bar_pannel.style.height="50PX")}))}}),o}())).init()}();
