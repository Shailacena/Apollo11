!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).jmfe={})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={exports:{}};!function(e){!function(t,n){e.exports?e.exports=n(t):(t.jm||(t.jm={jdshare:null}),t.jm.jdshare=n(t),t.jdshare=n(t))}("undefined"!=typeof window?window:t,(function(e){var t,n=navigator.userAgent.toLowerCase(),r=n.split(";"),i=-1!=n.indexOf("jdapp"),o=-1!=n.indexOf("jdltapp"),a=-1!=n.indexOf("jdjchapp"),s=function(){if(i&&r[2])try{return parseInt(r[2].replace(/\./g,""))}catch(e){}}(),c="jdlog"===r[1]?"android"===r[2]:"android"===r[1],l="jdlog"===r[1]?"iphone"===r[2]:"iphone"===r[1],d=c||l,u=-1!=n.indexOf("ipad");/MicroMessenger/i.test(n);var p=d&&i&&s>=500,f=d&&i&&s>=440&&s<500,m=u&&i&&s>=360,h=d&&i&&s>=702,g=d&&i&&s>=836,w=d&&i&&s<=840,y=d&&i&&s>=620,v=e.isJDAppNewShareEnable&&1==e.isJDAppNewShareEnable,b=d&&i&&s>=1114&&s<=1127,S=d?o?"openjdlite://":a?"openapp.jdjch://":"openapp.jdmobile://":u?"openapp.jdipad://":void 0,k="Y",A="N",T="S",I="P",O="O";function N(e){var t=S+'communication?params={"des":"share","type":"111","title":"'+e.title+'","content":"'+e.content+'","shareUrl":"'+e.url+'","iconUrl":"'+e.img+'","shareActionType":"'+e.shareActionType+'","channel":"'+e.channel+'","timeline_title":"'+e.timeline_title+'","qrparam":"'+e.qrparam+'","keyparam":"'+e.keyparam+'","shareSource":"'+e.shareSource+'","weiXinContentParam":"'+e.weiXinContentParam+'","isNewWeixinShareUI":"'+e.isNewWeixinShareUI+'","showFriendList":"'+e.showFriendList+'","callback":"'+e.callbackSwitcher+'","clickcallback":"'+e.clickcallbackSwitcher+'"}';return console.log("schema:",t),t}function j(e){var t={title:e.title,content:e.content,shareUrl:decodeURIComponent(e.url),iconUrl:decodeURIComponent(e.img),shareActionType:e.shareActionType,channel:e.channel,timeline_title:e.timeline_title,qrparam:e.qrparam,keyparam:e.keyparam,shareSource:e.shareSource,weiXinContentParam:e.weiXinContentParam,isNewWeixinShareUI:e.isNewWeixinShareUI,showFriendList:e.showFriendList,callback:e.callbackSwitcher,clickcallback:e.clickcallbackSwitcher,eventId:""};h&&e.mpId&&e.mpPath&&e.mpIconUrl&&(t.mpId=e.mpId,t.mpPath=e.mpPath,t.mpIconUrl=e.mpIconUrl,t.mpType=e.mpType),y&&e.incentiveBizType&&e.incentiveBizId&&(t.incentiveBizType=e.incentiveBizType,t.incentiveBizId=e.incentiveBizId),shareHelper.initShare(JSON.stringify(t))}function J(e,t){shareHelper[e](t.title,t.content,decodeURIComponent(t.url),decodeURIComponent(t.img),t.callbackSwitcher)}function C(e,t){shareHelper[e](t.title,t.content,decodeURIComponent(t.url),decodeURIComponent(t.img))}function P(e,t){return S+'communication?params={"action":"'+t+'","title":"'+e.title+'","content":"'+e.content+'","shareUrl":"'+e.url+'","iconUrl":"'+e.img+'","isCallBack":"'+e.callbackSwitcher+'"}'}function R(e){var t,n={category:"jump",des:"share",type:"111",title:e.title,content:e.content,shareUrl:e.url,imageUrl:e.img,iconUrl:e.img,timeline_title:e.timeline_title,qrparam:e.qrparam,keyparam:e.keyparam,shareSource:e.shareSource,weiXinContentParam:e.weiXinContentParam,isNewWeixinShareUI:e.isNewWeixinShareUI,showFriendList:e.showFriendList,channel:e.channel,isCallBack:e.callbackSwitcher,clickcallback:e.clickcallbackSwitcher,shareActionType:e.shareActionType};if(h&&e.mpId&&e.mpPath&&e.mpIconUrl&&(n.mpId=e.mpId,n.mpPath=encodeURIComponent(e.mpPath),n.mpIconUrl=encodeURIComponent(e.mpIconUrl),n.mpType=e.mpType),g){t=e.keyparam,"[object Object]"===Object.prototype.toString.call(t)&&(n.keyparam=function(e,t){var n={},r={};for(var i in e)n[i]=e[i];for(var i in n)n.hasOwnProperty(i)&&t.indexOf(i)>-1?r[i]=encodeURIComponent(n[i]):r[i]=n[i];return r}(e.keyparam,["keyImg","url","keyId"]))}y&&e.incentiveBizType&&e.incentiveBizId&&(n.incentiveBizType=e.incentiveBizType,n.incentiveBizId=e.incentiveBizId);var r=S+"virtual?params="+JSON.stringify(n);return console.log("schema",r),r}function U(e){if(!(this instanceof U))return new U}function D(e){this.message=e,this.name="JdShareException",this.toString=function(){return this.name+": "+this.message}}function E(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(e[n]=t[n])}function M(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function _(t){e.jdappShareRes=function(e){e.hasOwnProperty("shareResult")?t.callback&&t.callback(e):l&&g&&w&&e.hasOwnProperty("shareEvent")?("CANCEL_SHARE_CONTENT"==e.shareEvent?(e.shareResult="2",e.shareChannel=""):(e.shareResult="0",e.shareChannel={WeChat_Friend:"Wxfriends",WeChat_FriendTimeline:"Wxmoments",Weibo:"Sinaweibo",QQFriend_SHARE_CLIENT:"QQfriends",QQZone_SHARE_CLIENT:"QQzone"}[e.shareEvent]),t.callback&&t.callback(e)):t.clickcallback&&t.clickcallback(e)}}function B(e){var t="";if(e){if(l){if(f){if(t={Wxfriends:"WeChat_Friend",Wxmoments:"WeChat_FriendTimeline",Sinaweibo:"Weibo",QQfriends:"QQFriend_SHARE_CLIENT",QQzone:"QQZone_SHARE_CLIENT",Moreshare:""}[e])return t;throw new D("输入的channel参数在iphone版本中不存在")}return e}return e}return e}function x(e){return void 0!==e.title&&void 0!==e.content&&void 0!==e.url&&void 0!==e.img}function H(e){if(x(e)){try{var t,n,r,i,o={timeline_title:"",channel:"",qrparam:null,keyparam:null,shareSource:null,weiXinContentParam:null,isNewWeixinShareUI:null,showFriendList:"",callback:null,clickcallback:null,mpId:null,mpPath:null,mpIconUrl:null,mpType:null,incentiveBizType:null,incentiveBizId:null};"[object Object]"===Object.prototype.toString.call(e)&&E(o,e),t="function"==typeof o.callback,r="function"==typeof o.clickcallback,n=t?k:A,i=r?k:A,t&&r?_({callback:o.callback,clickcallback:o.clickcallback}):t?_({callback:o.callback}):r&&_({clickcallback:o.clickcallback}),"[object Object]"===Object.prototype.toString.call(o.qrparam)&&(o.qrparam.top_pic=o.qrparam.top_pic?encodeURIComponent(decodeURIComponent(o.qrparam.top_pic)):"",o.qrparam.mid_pic=o.qrparam.mid_pic?encodeURIComponent(decodeURIComponent(o.qrparam.mid_pic)):"",o.qrparam.qr_direct=o.qrparam.qr_direct?encodeURIComponent(decodeURIComponent(o.qrparam.qr_direct)):""),o.callbackSwitcher=n,o.clickcallbackSwitcher=i,o.url=M(o.url,"_ts="+(new Date).getTime()),o.channel=B(o.channel),o.url=encodeURIComponent(o.url),o.img=encodeURIComponent(o.img)}catch(e){throw e}return o}throw new D("调用方法时传入配置对象格式错误，请查看文档")}function L(t){if(!x(t))throw new D("调用方法时传入配置对象格式错误，请查看文档");try{var n,r,i,o,a={category:"jump",des:"share",type:"111",title:t.title,content:t.content,shareUrl:t.url,imageUrl:t.img,iconUrl:t.img,timeline_title:t.timeline_title,qrparam:t.qrparam,keyparam:t.keyparam,shareSource:t.shareSource,weiXinContentParam:t.weiXinContentParam,isNewWeixinShareUI:t.isNewWeixinShareUI,showFriendList:t.showFriendList,channel:t.channel};"[object Object]"===Object.prototype.toString.call(t)&&E(a,t),n="function"==typeof a.callback,i="function"==typeof a.clickcallback,r=n?k:A,o=i?k:A,n&&i?_({callback:a.callback,clickcallback:a.clickcallback}):n?_({callback:a.callback}):i&&_({clickcallback:a.clickcallback}),a.callbackSwitcher=r,a.clickcallbackSwitcher=o,a.url=M(a.url,"_ts="+(new Date).getTime()),a.channel=B(a.channel);var s={method:"configShare",params:JSON.stringify(a)};e.webkit.messageHandlers.JDAppUnite.postMessage(s)}catch(e){throw console.log("error",e),e}}function W(e){b&&e.keyparam&&"string"==typeof e.keyparam.keyChannel&&e.keyparam.sourceCode&&(e.isNewWeixinShareUI="0",/Wxfriends/.test(e.keyparam.keyChannel)||(e.keyparam.keyChannel=e.keyparam.keyChannel.split(",").concat("Wxfriends").join(",")))}return D.prototype=Object.create(Error.prototype),D.prototype.constructor=D,U.prototype.setShareInfo=function(t){try{var n=null;if((n=H(t)).shareActionType=T,i||a)if(c)if(e.shareHelper)if(W(n),"function"==typeof shareHelper.initShare)j(n);else if("function"==typeof shareHelper.setShareInfoCallback)if(n.callbackSwitcher===k)try{J("setShareInfoCallback",n)}catch(e){C("setShareInfoCallback",n)}else try{J("setShareInfoCallback",n)}catch(e){"function"==typeof shareHelper.setShareInfo&&C("setShareInfo",n)}else"function"==typeof shareHelper.setShareInfo&&C("setShareInfo",n);else e.location.href=N(n);else(l||u)&&(p||m||a?v?(t.shareActionType=T,L(t)):location.href=R(n):l&&(location.href=P(n,"syncShareData")));else o&&(c?e.location.href=N(n):(l||u)&&(location.href=R(n)))}catch(e){throw e}},U.prototype.callSharePane=function(t){try{var n=null;(n=H(t)).shareActionType=I,c?(i||a)&&e.shareHelper?(W(n),"function"==typeof shareHelper.initShare?j(n):"function"==typeof shareHelper.callShare?J("callShare",n):e.location.href=N(n)):e.location.href=N(n):(l||u)&&(p||m||a?v?(t.shareActionType=I,L(t)):location.href=R(n):o?location.href=R(n):l&&(location.href=P(n,"share")))}catch(e){throw e}},U.prototype.sendDirectShare=function(t){try{var n,r=null;if((r=H(t)).shareActionType=O,c)(i||a)&&e.shareHelper?"function"==typeof shareHelper.initShare?j(r):"function"==typeof shareHelper.sendShare?shareHelper.sendShare(r.title,r.content,decodeURIComponent(r.url),decodeURIComponent(r.img),r.channel,r.callbackSwitcher):location.href=N(r):e.location.href=N(r);else if(l||u){if(!r.channel)throw new D("分享渠道未设置");p||m||a?v?(t.shareActionType=O,L(t)):location.href=R(r):o?location.href=R(r):l&&(n=S+'virtual?params={"category":"jump","des":"share","type":"111","title":"'+r.title+'","content":"'+r.content+'","shareUrl":"'+r.url+'","imageUrl":"'+r.img+'","channel":"'+r.channel+'","isCallBack":"'+r.callbackSwitcher+'"}',location.href=n)}}catch(e){throw e}},t||(t=U()),t}))}(n);var r=n.exports,i={exports:{}};!function(e,n){var r,i;r="undefined"!=typeof window?window:t,i=function(e){var t,n,r=(t=0,function(e){var n=++t+"";return e?e+n:n});function i(e){this.message=e,this.name="JdReminderException",this.toString=function(){console.error(this.name+": "+this.message)}}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i;var o=Object.prototype.toString,a=function(e){return"[object Object]"===o.call(e)},s=function(e){return void 0===e},c=function(e){return e&&"function"==typeof e},l=function(e){return"[object Array]"===o.call(e)},d=function(e){return"string"==typeof e},u=function(e){return""===e},p=function(e){return void 0!==e?e:void 0},f=e.navigator.userAgent.toLowerCase(),m=f.split(";"),h=!!f.match(/supportjdshwk/i)||1==e._is_jdsh_wkwebview,g=-1!=f.indexOf("jdapp"),w="iphone"===m[1]||"ipad"===m[1],y="android"===m[1],v=-1!=f.indexOf("jdapp"),b=(m=f.split(";"),v&&m[2]?m[2].replace(/\./g,""):""),S=b>=836,k=v&&b>=610;function A(e,t){if(s(e)||s(t))throw new i("target, source参数必须提供");if(!a(e)||!a(t))throw new i("target, source参数必须为Object类型");for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function T(e,t){var n=arguments;if(!k){if(s(n[1])){var r=n[0].split(",");e=1==r[0],t=r[1]}else e="true"==n[0],t=n[1];return{appointed:e,id:t}}if("1"==(e+="")||"0"==e)return{appointed:"1"==e,id:t};if(u(e))return{status:[],id:t};try{var i=JSON.parse(e)}catch(e){return{status:[],id:t}}return l(i)?{status:i,id:t}:void 0}function I(){if(!(this instanceof I))return new I}return I.prototype.util={isNeedChangeStatus:k,isHighVersion:k,isJd:g,isIPhoneOrIPad:w,isAndroid:y,isObject:a,isFunction:c,isArray:l,isUndefined:s,isEmptyString:u,returnDefaultUndefined:p,extendObject:A,parseCallbackData:T},I.prototype.presetReminderOptions=function(e){if(console.warn("init方法不是必须执行的，如果需要设定全局的type值，可以执行该函数进行统一设置；如不需要，可以在添加、取消、查询提醒操作时针对每一条提醒传入相应的type值"),this.setting={},e){if(!a(e))throw new i("入参必须为Object对象类型");for(var t in e)e.hasOwnProperty(t)&&(e[t]=p(e[t]));A(this.setting,e)}},I.prototype.transformURLToJSON=function(e){k&&(e.url=JSON.stringify({des:"m",params:{url:e.url}}))},I.prototype.transformKeyToString=function(e){for(var t in e)e.hasOwnProperty(t)&&(k||"id"==t&&w)&&(e[t]=e[t]+"");return e},I.prototype.filterParamOptions=function(e){if(!a(e))throw new i("入参必须为Object对象类型");var t={};if(A(t,e),e=null,w&&!k&&(t.time=t.time/1e3+""),s(this.setting)){if(s(t.type))throw new i("type字段缺失，请在options对象参数中指定")}else if(s(t.type)){if(s(this.setting.type))throw new i("type字段缺失，请在构造函数或options对象参数中指定");t.type=k?this.setting.type+"":this.setting.type}return this.transformURLToJSON(t),this.transformKeyToString(t),t},I.prototype.createIOSSchemaForLowVersion=function(e,t){return(t=this.filterParamOptions(t)).type=6,'openApp.jdMobile://virtual?params={"category":"jump","des":"saveToCalender","sourceValue":"sourceValue_saveToCalender","sourceType":"sourceType_saveToCalender","SourceParam":"sourceParam","actionType":"'+e+'","dataType":"'+t.type+'","calendarTitle":"'+t.title+'","beginTime":"'+t.time+'","dataId":"'+t.id+'","jumpUrl":"'+encodeURIComponent(t.url)+'"}'},I.prototype.createAndroidSchemaForLowVersion=function(t,n){if((n=this.filterParamOptions(n)).type="HUODONG",!e.JdAndroid)throw new i("android->window.JDAndroid对象不存在，注意该对象应该只在APP内才会有");if("add"==t){if(!c(e.JdAndroid.setJDReminder))throw new i("android->setJDReminder不是一个函数，注意该函数应该只在APP内才会有");e.JdAndroid.setJDReminder(n.type,n.id,n.title,n.time,n.url)}else if("del"==t){if(!c(e.JdAndroid.cancelJDReminder))throw new i("android->cancelJDReminder不是一个函数，注意该函数应该只在APP内才会有");e.JdAndroid.cancelJDReminder(n.type,n.id,n.time)}},I.prototype.createRouterReminderOptionsJsonString=function(e,t){if("add"==e)return JSON.stringify({routerParam:{businessType:t.type,showTag:t.tag||"",remindTitle:t.title||"",beginTime:t.time,uniqueId:t.id,jumpStr:t.url||"",imgUrl:t.imgUrl||"",notifyTime:t.nTime||t.time-18e4,extraStr1:t.extra1||"",extraStr2:t.extra2||"",permissionStr:t.permissionStr||""},callBackName:t.addCallback,callBackId:t.id,routerURL:t.routerURL||""})},I.prototype.createReminderOptionsJsonString=function(e,t){return"add"==e?JSON.stringify({businessType:t.type,showTag:t.tag||"",remindTitle:t.title||"",beginTime:t.time,uniqueId:t.id,jumpStr:t.url||"",imgUrl:t.imgUrl||"",notifyTime:t.nTime||t.time-18e4,extraStr1:t.extra1||"",extraStr2:t.extra2||"",callBackName:t.addCallback,callBackId:t.id}):"del"==e?JSON.stringify({businessType:t.type,beginTime:t.time,uniqueId:t.id,callBackName:t.deleteCallback,callBackId:t.id}):void 0},I.prototype.createAllSameSchemaUsingJsBridge=function(t,n){n=this.filterParamOptions(n);var r=this.createReminderOptionsJsonString(t,n);if(!e.JDAppUnite)throw new i("window.JDAppUnite对象不存在，注意该函数应该只在APP内才会有");if("add"==t){if(!c(e.JDAppUnite.addReminder))throw new i("addReminder不是一个函数，注意该函数应该只在APP内才会有");e.JDAppUnite.addReminder(r)}else if("del"==t){if(!c(e.JDAppUnite.removeReminder))throw new i("removeReminder不是一个函数，注意该函数应该只在APP内才会有");e.JDAppUnite.removeReminder(r)}},I.prototype.filterRouterParams=function(e){return(e=this.filterParamOptions(e)).routerURL="router://JDBCalendarRemindModule/addRemindToCalendarWithPermissionControl",e},I.prototype.createIOSSchemaForRouter=function(e,t){t=this.filterRouterParams(t),this.executeIOSSchemaInWKWebviewCircumstance({method:"callRouterModuleWithParams",params:this.createRouterReminderOptionsJsonString(e,t)})},I.prototype.createIOSSchemaForWKWebview=function(e,t){t=this.filterParamOptions(t),this.executeIOSSchemaInWKWebviewCircumstance({method:"add"==e?"addReminder":"removeReminder",params:this.createReminderOptionsJsonString(e,t)})},I.prototype.executeIOSSchemaInWKWebviewCircumstance=function(t){var n=A({callBackName:null,callBackId:null},t);try{e.webkit.messageHandlers.JDAppUnite.postMessage(n)}catch(e){throw new i("window.webkit.messageHandlers.JDAppUnite.postMessage方法执行错误")}},I.prototype.createJdReminderIOSSchema=function(e,t){return S&&"add"==e?this.createIOSSchemaForRouter(e,t):h?this.createIOSSchemaForWKWebview(e,t):k?this.createAllSameSchemaUsingJsBridge(e,t):this.createIOSSchemaForLowVersion(e,t)},I.prototype.createJdReminderAndroidSchema=function(e,t){return k?this.createAllSameSchemaUsingJsBridge(e,t):this.createAndroidSchemaForLowVersion(e,t)},I.prototype.createJdReminderSchema=function(e,t){if(!a(t))throw new i("入口参数必须为Object对象类型");return w?this.createJdReminderIOSSchema(e,t):y?this.createJdReminderAndroidSchema(e,t):void 0},I.prototype.addReminder=function(t){var n=this;return new Promise((function(r,i){var o="addJdReminderCallback"+t.id;e[o]=function(t,n){var i;i=w&&S?function(e){try{var t=JSON.parse(e);return t&&"0"==t.status?{appointed:"1"==t.data,id:t.callBackId,status:"0"}:{appointed:!1,id:t.callBackId,status:t.status,msg:t.msg||"回调传参错误"}}catch(e){return{appointed:!1,status:"",msg:"回调传参错误"}}}(t):T(t,n),e[o]=null,r(i)},t.addCallback=o;var a=n.createJdReminderSchema("add",t);d(a)&&r({appointed:!0,id:t.id})}))},I.prototype.deleteReminder=function(t,n){var r=this;return new Promise((function(n,i){var o="deleteJdReminderCallback"+t.id;e[o]=function(t,r){var i=T(t,r);e[o]=null,n(i)},t.deleteCallback=o;var a=r.createJdReminderSchema("del",t);d(a)&&n({appointed:!0,id:t.id})}))},I.prototype.queryReminder=function(t){var n=this;return new Promise((function(r,o){var a;if(t=n.filterParamOptions(t),e.checkReminderCallback=function(t,n){var i=T(t,n);e.checkReminderCallback=null,r(i)},w){if(h)return n.executeIOSSchemaInWKWebviewCircumstance({method:"checkReminder",params:JSON.stringify({businessType:t.type,beginTime:t.time,uniqueId:t.id,callBackName:"checkReminderCallback",callBackId:t.id})});k?a=JSON.stringify({businessType:t.type,beginTime:t.time,uniqueId:t.id,callBackName:"checkReminderCallback",callBackId:t.id}):(t.type="HUODONG",a=JSON.stringify({dataType:t.type,beginTime:t.time,jumpUrl:t.url,callBackName:"checkReminderCallback",callBackId:t.id})),k?e.JDAppUnite&&e.JDAppUnite.checkReminder(a):e.MobileNavi&&e.MobileNavi.checkReminder(a)}else if(y)if(k){if(!e.JDAppUnite)throw new i("window.JDAppUnite不存在，注意该对象只在APP内才会有");if(!c(e.JDAppUnite.checkReminder))throw new i("window.JDAppUnite.checkReminder 不是一个函数");e.JDAppUnite.checkReminder(JSON.stringify({businessType:t.type,beginTime:t.time,uniqueId:t.id,callBackName:"checkReminderCallback",callBackId:t.id}))}else{if(!e.JdAndroid)throw new i("window.JdAndroid不存在，注意该对象只在APP内才会有");if(!c(e.JdAndroid.checkReminder))throw new i("window.JdAndroid.checkReminder 不是一个函数");e.JdAndroid.checkReminder(t.type,t.id,t.time,t.id)}}))},I.prototype.queryRemindersByTimeSpan=function(t){var n=r(),o=this;return new Promise((function(r,a){var s="checkAllJdRemindedStatusCallback"+n,l=JSON.stringify({businessType:t.type,fromTime:t.fromTime+""||"",toTime:t.toTime+""||"",callBackName:s,callBackId:n});if(e[s]=function(t,n){var i=T(t,n);e[s]=null,r(function(e){var t={};return e.forEach((function(e){t[e]=!0})),t}(i.status))},h)o.executeIOSSchemaInWKWebviewCircumstance({method:"getAllRemindersWithTimeSpanAndBusinessType",params:l});else{if(!e.JDAppUnite)throw new i("window.JDAppUnite不存在，注意该对象只在APP内才会有");if(!c(e.JDAppUnite.getAllRemindersWithTimeSpanAndBusinessType))throw new i("window.JDAppUnite.getAllRemindersWithTimeSpanAndBusinessType不是函数");e.JDAppUnite.getAllRemindersWithTimeSpanAndBusinessType(l)}}))},I.prototype.queryRemindersByOptions=function(e){if(!l(e))throw new i("optionsArr参数必须为数组");var t=0,n=0,r=e.length,o=[],s=this;function c(e){var t={};return e.forEach((function(e){t[e.id]=e.appointed||!1})),t}return new Promise((function(l){!function d(){if(n<=r-1){var u=e[n];if(!a(u))throw new i("optionsArr数组内部子项不是Object类型数据");s.queryReminder(u).then((function(e){o.push(e),n++,++t==r-0?l(c(o)):d()}))}else t==r-0&&l(c(o))}()}))},I.prototype.returnAllRemindedStatus=function(e){},n||(n=I()),n},n?e.exports=i(r):(r.jm=r.jm||{},r.jm.jdReminder=r.jm.jdReminder||i(r))}(i,i.exports);var o=i.exports,a={exports:{}};!function(e){!function(){var n="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function i(){i=function(){},n.Symbol||(n.Symbol=a)}var o=0;function a(e){return"jscomp_symbol_"+(e||"")+o++}function s(){i();var e=n.Symbol.iterator;e||(e=n.Symbol.iterator=n.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&r(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return c(this)}}),s=function(){}}function c(e){var t=0;return function(e){return s(),(e={next:e})[n.Symbol.iterator]=function(){return this},e}((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))}function l(e){s();var t=e[Symbol.iterator];return t?t.call(e):c(e)}function d(e){if(!(e instanceof Array)){e=l(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var u=0;var p="img script iframe link audio video source".split(" ");function f(e,t){for(var n=(e=l(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||f(n.children,t))return!0;return!1}function m(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=l(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=l(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort((function(e,t){return e.timestamp-t.timestamp})),e=e.length,t=n.length-1;0<=t;t--)switch((r=n[t]).type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function h(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var t=window.__tti&&window.__tti.o;this.a=e?e.map((function(e){return{start:e.startTime,end:e.startTime+e.duration}})):[],t&&t.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(e,t){var n=XMLHttpRequest.prototype.send,r=u++;XMLHttpRequest.prototype.send=function(i){for(var o=[],a=0;a<arguments.length;++a)o[a-0]=arguments[a];var s=this;return e(r),this.addEventListener("readystatechange",(function(){4===s.readyState&&t(r)})),n.apply(this,o)}}(this.m.bind(this),this.l.bind(this)),function(e,t){var n=fetch;fetch=function(r){for(var i=[],o=0;o<arguments.length;++o)i[o-0]=arguments[o];return new Promise((function(r,o){var a=u++;e(a),n.apply(null,[].concat(d(i))).then((function(e){t(a),r(e)}),(function(e){t(e),o(e)}))}))}}(this.m.bind(this),this.l.bind(this)),function(e){e.c=new PerformanceObserver((function(t){for(var n=(t=l(t.getEntries())).next();!n.done;n=t.next())if("resource"===(n=n.value).entryType&&(e.b.push({start:n.fetchStart,end:n.responseEnd}),w(e,m(e.g,e.b)+5e3)),"longtask"===n.entryType){var r=n.startTime+n.duration;e.a.push({start:n.startTime,end:r}),w(e,r+5e3)}})),e.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(e){var t=new MutationObserver((function(t){for(var n=(t=l(t)).next();!n.done;n=t.next())("childList"==(n=n.value).type&&f(n.addedNodes,p)||"attributes"==n.type&&p.includes(n.target.tagName.toLowerCase()))&&e(n)}));return t.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t}(this.B.bind(this)))}function g(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=m(e.g,e.b);w(e,Math.max(n+5e3,t))}function w(e,t){!e.i||e.v>t||(clearTimeout(e.j),e.j=setTimeout((function(){var t=performance.timing.navigationStart,n=m(e.g,e.b);t=(window.a&&window.a.A?1e3*window.a.A().C-t:0)||performance.timing.domContentLoadedEventEnd-t;if(e.u)var r=e.u;else performance.timing.domContentLoadedEventEnd?r=(r=performance.timing).domContentLoadedEventEnd-r.navigationStart:r=null;var i=performance.now();null===r&&w(e,Math.max(n+5e3,i+1e3));var o=e.a;5e3>i-n?n=null:n=5e3>i-(n=o.length?o[o.length-1].end:t)?null:Math.max(n,r),n&&(e.s(n),clearTimeout(e.j),e.i=!1,e.c&&e.c.disconnect(),e.h&&e.h.disconnect()),w(e,performance.now()+1e3)}),t-performance.now()),e.v=t)}h.prototype.getFirstConsistentlyInteractive=function(){var e=this;return new Promise((function(t){e.s=t,"complete"==document.readyState?g(e):window.addEventListener("load",(function(){g(e)}))}))},h.prototype.m=function(e){this.f.set(e,performance.now())},h.prototype.l=function(e){this.f.delete(e)},h.prototype.B=function(){w(this,performance.now()+5e3)},n.Object.defineProperties(h.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(d(this.f.values()))}}});var y={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new h(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};e.exports?e.exports=y:window.ttiPolyfill=y}()}(a);var s,c,l=a.exports;function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(){try{if(!(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto))){for(var e=0;e<16;e++)c[e]=Math.floor(255*Math.random());return c}return s(c)}catch(e){for(var t=0;t<16;t++)c[t]=Math.floor(255*Math.random());return c}}c="function"==typeof Uint8Array?new Uint8Array(16):[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(var m=[],h=0;h<256;++h)m.push((h+256).toString(16).substr(1));var g=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function w(e){return"string"==typeof e&&g.test(e)}function y(e,t,n){var r=(e=e||{}).random||(e.rng||f)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase();if(!w(n))throw TypeError("Stringified UUID is invalid");return n}(r)}function v(e){if(e instanceof Element)try{for(var t=[];e&&e.nodeType===Node.ELEMENT_NODE;){var n=e.nodeName.toLowerCase();if(e.id){n+="#"+e.id,t.unshift(n);break}for(var r=e,i=1;r=r.previousElementSibling;)r.nodeName.toLowerCase()==n&&i++;if(1!=i&&(n+=":nth-of-type("+i+")"),t.unshift(n),!(e=e.parentNode))break}return t.join(">").replace(/div/g,"d").replace(/span/g,"s").replace(/header/g,"h").replace(/footer/g,"f").replace(/nth-of-type/g,"nth")}catch(e){return""}}var b=function(e){var t=e;return"number"==typeof e&&(t=Number(e.toFixed(2))),t},S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"reportData",{fcp:null,fp:null,lcp:[],fid:null,cls:null,tbt:null,clsInfo:[],tti:null,longTask:[],fps:[]})}var t,n,r;return t=e,n=[{key:"setFPS",value:function(e){this.reportData.fps.push(e)}},{key:"setFP",value:function(e){this.reportData.fp=e}},{key:"setFCP",value:function(e){this.reportData.fcp=e}},{key:"setLCP",value:function(e){this.reportData.lcp=e}},{key:"setFID",value:function(e){this.reportData.fid=e}},{key:"setCLS",value:function(e){this.reportData.cls=e,this.reportData.clsInfo=[]}},{key:"setCLSInfo",value:function(e){var t;null===(t=this.reportData.clsInfo)||void 0===t||t.push(e)}},{key:"setTTI",value:function(e){this.reportData.tti=e}},{key:"setLongTask",value:function(e){this.reportData.longTask.push(e)}},{key:"setTBT",value:function(){var e=this.reportData,t=e.longTask,n=e.fcp,r=e.tti;if(t.length>0){var i=0;t.forEach((function(e){n&&e.startTime>=n&&(null==r||e.startTime<=r)&&(i+=e.duration-50)})),this.reportData.tbt=b(i)}}},{key:"buildServerInfoParam",value:function(e){var t=[];for(var n in e){var r;t.push(n+"="+encodeURIComponent(null!==(r=e[n])&&void 0!==r?r:""))}return t.join("&")}},{key:"buildPerformanceParam",value:function(){var e=[],t=this.reportData,n=t.fp,r=t.fcp,i=t.lcp,o=t.fid,a=t.cls,s=t.clsInfo,c=t.tti,l=t.longTask,d=t.tbt,u=t.fps;e.push("fp=".concat(null!=n?n:"")),e.push("fcp=".concat(null!=r?r:"")),e.push("lcp=".concat(encodeURIComponent(JSON.stringify(i)))),e.push("fid=".concat(null!=o?o:"")),e.push("cls=".concat(null!=a?a:"")),e.push("clsInfo=".concat(encodeURIComponent(JSON.stringify(s)))),e.push("tti=".concat(null!=c?c:"")),e.push("fps=".concat(encodeURIComponent(JSON.stringify(u))));for(var p=[],f=0;f<l.length&&(p.push(l[f].duration),9!=f);f++);return e.push("longTask=".concat(encodeURIComponent(JSON.stringify(p)))),e.push("tbt=".concat(null!=d?d:"")),e.join("&")}},{key:"report",value:function(e){if(e&&null!=e.options.flag){this.setTBT();var t,n=this.buildServerInfoParam(e.getServerInfo()),r=this.buildPerformanceParam();try{var i=new Image,o="//h5speed.m.jd.com",a=e.options.serverDomain.match(/.*\.com/);t=a,"[object Array]"===Object.prototype.toString.call(t)&&a.length>0&&(o=a[0]),i.src="".concat(o,"/v2/speed/event?").concat(n,"&").concat(r)}catch(e){}}}}],r=[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}],n&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();p(S,"instance",void 0);var k,A=[],T=6e3,I=function(e){"function"==typeof e&&A.push(e)},O=function(e,t){try{if(-1!=PerformanceObserver.supportedEntryTypes.indexOf(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){for(var n=e.getEntries(),r=0;r<n.length;r++)t(n[r])}));return n.observe({type:e,buffered:!0}),I((function(){n.disconnect()})),n}}catch(e){}},N=0,j=[],J=0,C=[],P=0,R=function(){var e=S.getInstance();O("layout-shift",(function(t){if(!t.hadRecentInput){var n=C[0],r=C[C.length-1];J&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(J+=t.value,C.push(t)):(J=t.value,C=[t]),J>N&&(N=J,j=C,e.setCLS((o=i=N,"number"==typeof i&&(o=Number(i.toFixed(4))),o)),j.forEach((function(t){if(++P<=10)if(e.setCLSInfo(Number(t.value.toFixed(4))),t.sources){for(var n=[],r=0;r<t.sources.length;r++)n.push(v(t.sources[r].node));e.setCLSInfo(n.join("|"))}else e.setCLSInfo("null")})))}var i,o}))},U=!1,D=function(){var e,t,n,r;e=performance.now(),t=0,n=performance.now(),r=function r(){var i=performance.now(),o=i-n;n=i;var a=Math.round(1e3/o);t++,i>1e3+e&&((a=Math.round(1e3*t/(i-e)))<=20&&E.setFPS(a),t=0,e=i),0==U&&window.requestAnimationFrame(r)},r(),I((function(){U=!0}))},E=S.getInstance();var M=!1;function _(e){var t,n;null!=e&&null!==(t=e.options)&&void 0!==t&&t.flag&&("number"==typeof(n=e.performanceReportTime)&&n>=3e3&&(T=n,clearTimeout(k),k=setTimeout((function(){A&&A.length>0&&A.forEach((function(e){e()}))}),T)),M||(M=!0,function(e){if("function"!=typeof PerformanceObserver)return void console.log("not support PerformanceObserver");try{O("paint",(function(e){"first-contentful-paint"==e.name?S.getInstance().setFCP(b(e.startTime)):"first-paint"==e.name&&S.getInstance().setFP(b(e.startTime))})),function(){var e=S.getInstance();O("largest-contentful-paint",(function(t){var n=t.startTime;e.setLCP([b(n)+"",v(null==t?void 0:t.element)])}))}(),function(){var e=S.getInstance();O("first-input",(function(t){var n=t.processingStart-t.startTime;e.setFID(b(n))}))}(),l.getFirstConsistentlyInteractive().then((function(e){e&&S.getInstance().setTTI(b(e))})),function(){var e=S.getInstance();O("longtask",(function(t){e.setLongTask({startTime:t.startTime,duration:b(t.duration)})}))}(),R(),D();var t=S.getInstance();I((function(){t.report(e)}))}catch(e){}}(e)))}var B=[/index\.bundle\..{20,32}\.css/gi,/app\..{20,32}\.css/gi,/index\.bundle\..{20}\.js/gi,/app\..{20}\.js/gi,"unify.min.js"],x=[-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function H(e){x[e]=1}function L(e,t){for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(e[n]=t[n])}function W(e,t){var n=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/.exec(e)[9];if(n&&""!==n)for(var r=n.split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===t)return decodeURIComponent(o[1])}return!1}function F(e,t){return""===t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function q(e){var t=[];for(var n in e)if(e.hasOwnProperty(n)&&void 0!==e[n])try{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}catch(e){}return t}function V(e){var t=this;if(!(this instanceof V))return new V(e);this.sid=y(),this.selected=!1,this.timing={},this.isReported=!1,this.performanceReportTime=8e3,this.options={serverUrl:"//h5speed.m.jd.com",serverDomain:"//h5speed.m.jd.com",flag:null,profilingRate:1,autoReport:!1,autoAddStaticReport:!1,autoAddApiReport:!1,autoAddImageReport:!1},this.init(e),this.pitsData=[],this.staticFiles=[],this.staticFilesSpecialType=[],this.customKeyValueData={},this.CONST_CREATE_TIME_MS=1550731072251,this.CONST_REASONABLE_TIME_LIMIT=6e4,this.performance=window.performance,this.isPerformanceApiAvailable=void 0!==this.performance,this.isTimingApiAvailable=this.isPerformanceApiAvailable&&void 0!==this.performance.timing,this.isGetEntriesApiAvailable=this.isPerformanceApiAvailable&&"function"==typeof this.performance.getEntries,function(){var e=window&&window.navigator?navigator.userAgent:"",t=/^jdapp/i.test(e),n=/ip(hone|od)|ipad/i.test(e),r=/android/i.test(e)&&!n;return new Promise((function(e){if(t){var i="getNetWorkType";window[i]||(window[i]=function(t){e({status:"0",msg:"success",data:t})});try{n&&window.webkit?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"getNetWorkType",params:i}):r&&window.JDAppUnite.getNetWorkType(i)}catch(t){e({msg:"fail",data:"error"})}}else{if(window&&window.navigator){var o=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{},a=o.type||o.effectiveType||"unknown";e({msg:"success",data:a})}e({msg:"fail",data:"error"})}}))}().then((function(e){"success"===e.msg&&(t.network=e.data)})).catch((function(e){}))}var X={init:function(e){null!==e.flag&&("object"===d(e)&&L(this.options,e),e.performanceReportTime&&(this.performanceReportTime=e.performanceReportTime),this.options.autoAddStaticReport&&(this.staticFiles=B),this.options.serverUrl=this.options.serverDomain+(12==this.options.flag?"/v2/speed/ware":"/v2/speed/activity"),this.selected=Math.random()<this.options.profilingRate,!0===this.options.autoReport&&this.enableAutoReport(),_(this))},getTimingData:function(){var e,t,n={},r=this;n.hasPerformanceApi=r.isPerformanceApiAvailable?1:0,n.hasTimingApi=r.isTimingApiAvailable?1:0,n.hasGetEntriesApi=r.isGetEntriesApiAvailable?1:0,t=0,window.chrome&&"function"==typeof window.chrome.loadTimes?t=1e3*window.chrome.loadTimes().firstPaintTime:r.isTimingApiAvailable&&"number"==typeof r.performance.timing.msFirstPaint&&(t=r.performance.timing.msFirstPaint),e=Math.round(t),n.hasFirstPaintApi=e>0?1:0;try{if(r.isTimingApiAvailable){r.performance.timing.firstPaint=e;var i=r.performance.timing;n.domainLookup=i.domainLookupEnd-i.domainLookupStart,n.redirection=i.fetchStart-i.navigationStart,n.serverConnection=i.requestStart-i.connectStart,n.request2ResponseStart=i.responseStart-i.requestStart,n.responseStart2responseEnd=i.responseEnd-i.responseStart,n.request2ResponseEnd=i.responseEnd-i.requestStart,n.domInteractive=i.domInteractive-i.navigationStart,n.domContentLoaded=i.domContentLoadedEventStart-i.navigationStart,n.firstPaint=i.firstPaint-i.navigationStart,n.pageLoad=i.loadEventStart-i.navigationStart,n.backEnd=i.responseEnd-i.navigationStart,n.frontEnd=i.loadEventStart-i.responseEnd,n.loadEvent=i.loadEventEnd-i.loadEventStart}}catch(e){}return n},traversalResources:function(e){try{var t=e.indexOf("img")>=0,n=e.indexOf("api")>=0,r=null,i={},o={};if(!this.isGetEntriesApiAvailable)return i;r=this.performance.getEntries();for(var a=0;a<r.length;a++){var s,c,l,d=r[a],u=d.name,p=d.initiatorType;if(t&&"img"==p&&u.indexOf("h5speed.m.jd.com/v1/exception")<0){var f=u.split("!")[0].split("/"),m=f[f.length-1];c=parseInt(d.duration),i[m]=c}!n||"script"!=p&&"xmlhttprequest"!=p||(s=W(u,"functionId"))&&(l=W(u,"nickName"),c=parseInt(d.duration),l?i["api-"+l]=c:o[s]?(o[s]+=1,i["api-"+s+o[s]]=c):(o[s]=1,i["api-"+s]=c))}return i}catch(e){}},report:function(){try{if(this.selected&&!this.isReported&&null!==this.options.flag){var e=new Image,t=[];this.options.autoAddApiReport&&t.push("api"),this.options.autoAddImageReport&&t.push("img");var n=t.length>0,r=this.buildUrl(this.getServerInfo(),this.getTimingData(),n?this.traversalResources(t):{});r&&(e.src=r),this.isReported=!0}}catch(e){}},getServerInfo:function(){var e=location.href.split("?")[0],t=document.getElementsByTagName("title")[0]&&document.getElementsByTagName("title")[0].innerText||"";return{flag:this.options.flag,sid:this.sid,libVer:"4.0.0",url:e,rts:(new Date).getTime(),title:t,network:this.network}},moduleReport:function(e,t){try{var n,r,i=[],o=new Image,a={},s="";if("string"==typeof t&&(a.moduleId=t),"[object Object]"===Object.prototype.toString.call(e)&&(e=[e]),"[object Array]"===Object.prototype.toString.call(e)&&(e.forEach((function(e){if(e.number&&e.key&&e.time){if(e.number>35)throw new Error("只提供1-35坑位上报");var t={};H(e.number),t["k"+e.number]=e.key,t["v"+e.number]=e.time,e.desc&&(t["s"+e.number]=e.desc||""),i.push(t)}})),i.length>0)){i.forEach((function(e){L(a,e)})),r=this.getServerInfo(),L(a,r),n=q(a),"[object Array]"===Object.prototype.toString.call(n)&&n.length>0&&(s=n.join("&"));var c=F("//h5speed.m.jd.com/v2/speed/event",s);c&&(o.src=c)}}catch(e){throw e}},addPits:function(e){try{var t=this;"[object Object]"===Object.prototype.toString.call(e)&&(e=[e]),"[object Array]"===Object.prototype.toString.call(e)&&e.forEach((function(e){if(e.number&&e.key&&e.time){if(r=e.number,0!==x[r])throw new Error("JdProfiler.addPits使用的固定坑位已经被占用，请更换");var n={};H(e.number),n["k"+e.number]=e.key,n["v"+e.number]=e.time,e.desc&&(n["s"+e.number]=e.desc||""),t.pitsData.push(n)}var r}))}catch(e){throw e}},add:function(e){this.addKeyValues(e)},detectStaticFile:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&t.push(e[n]);this.staticFiles=this.staticFiles.concat(t)},addStaticFile:function(e){try{"[object Array]"===Object.prototype.toString.call(e)&&(this.staticFiles=this.staticFiles.concat(e))}catch(e){}},addStaticFileByLimitedType:function(e){try{"[object Object]"===Object.prototype.toString.call(e)?this.staticFilesSpecialType=this.staticFilesSpecialType.concat([e]):"[object Array]"===Object.prototype.toString.call(e)&&(this.staticFilesSpecialType=this.staticFilesSpecialType.concat(e))}catch(e){}},addKeyValues:function(e){try{"[object Object]"===Object.prototype.toString.call(e)&&L(this.customKeyValueData,e)}catch(e){}},buildUrl:function(e,t,n){var r={},i={},o=[],a=[],s=[],c={},l="",d=this;L(r,e),(o=q(r)).length>0&&(l=o.join("&"));var u,p,f,m,h,g=0;for(var w in t)t.hasOwnProperty(w)&&void 0!==t[w]&&(g++,s.push("p"+g+"="+t[w]));return s.length>0&&(l=l+"&"+s.join("&")),d.isGetEntriesApiAvailable&&d.staticFiles.length>0&&(u=d.staticFiles,m={},h=null,c=d.isGetEntriesApiAvailable?(h=d.performance.getEntries(),u.forEach((function(e){try{if(p=e){var t=function(e,t){var n=[];if(e&&t.length>0)for(var r=0,i=t.length;r<i;r++){var o=t[r];if(e.test){var a=o.name.match(e);a&&a.length>0&&n.push({name:a,time:o.duration})}else-1!==o.name.indexOf(e)&&n.push({name:e,time:o.duration})}return n}(p,h);t.forEach((function(e){e&&(f=parseInt(e.time))>=0&&(m[encodeURIComponent(e.name)]=f)}))}}catch(e){}})),m):m,L(c,n),L(c,d.customKeyValueData),"[object Object]"===Object.prototype.toString.call(c)&&Object.getOwnPropertyNames(c).length>0&&(l=l+"&resources="+JSON.stringify(c))),d.isGetEntriesApiAvailable&&d.staticFilesSpecialType.length>0&&function(e){var t=null;d.isGetEntriesApiAvailable&&(t=d.performance.getEntries()),e.forEach((function(e){try{e&&function(e,t){var n=e.name,r=e.type,i=e.number,o=e.key;if(!(n&&r&&i&&o&&t.length>0))throw new Error("指定静态资源上报类型参数异常，请检查入参");for(var a=0,s=t.length;a<s;a++){var c=t[a];if(n.test){c.name.match(n),d.addPits({number:i,key:o,time:parseInt(c[r]),desc:e.desc});break}if(-1!==c.name.indexOf(n)){d.addPits({number:i,key:o,time:parseInt(c[r]),desc:e.desc});break}}}(e,t)}catch(e){}}))}(d.staticFilesSpecialType),d.isTimingApiAvailable&&d.pitsData.length>0&&(d.pitsData.forEach((function(e){L(i,e)})),a=q(i),"[object Array]"===Object.prototype.toString.call(a)&&a.length>0&&(l=l+"&"+a.join("&"))),F(this.options.serverUrl,l)},enableAutoReport:function(){var e=this;window.addEventListener("pageshow",(function(){window.setTimeout((function(){e.report()}),3e3)}),!1)}};V.prototype=X;var z=V({serverUrl:"//h5speed.m.jd.com",flag:null,profilingRate:1,autoReport:!1,autoAddStaticReport:!1,autoAddApiReport:!1,autoAddImageReport:!1});function Q(e){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}!0===z.options.autoReport&&z.enableAutoReport();var te=Object.prototype.toString;function ne(){var e,t,n,r,i,o,a=arguments.length<=0?void 0:arguments[0],s=1,c=arguments.length,l=!1;for("boolean"==typeof a?(l=a,a=(arguments.length<=1?void 0:arguments[1])||{},s=2):("object"!==Q(a)&&"function"!=typeof a||null==a)&&(a={});s<c;++s)if(null!=(e=s<0||arguments.length<=s?void 0:arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(l&&r&&(ie(r)||(i=re(r)))?(i?(i=!1,o=n&&re(n)?n:[]):o=n&&ie(n)?n:{},a[t]=ne(l,o,r)):void 0!==r&&(a[t]=r));return a}function re(e){return"[object Array]"===te.call(e)}function ie(e){if(!e||"[object Object]"!==te.call(e))return!1;var t,n=Object.prototype.hasOwnProperty,r=n.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!i)return!1;for(t in e);return void 0===t||n.call(e,t)}function oe(e,t,n){if(n>=3)return encodeURIComponent(t)+"=[RECURSIVE]";n=n+1||1;var r=[];for(var i in e)if(e.hasOwnProperty(i)&&null!=i&&null!=e[i]){var o=t?"".concat(t,"[").concat(i,"]"):i,a=e[i],s="object"===Q(a)?oe(a,o,n):encodeURIComponent(o)+"="+encodeURIComponent(a);r.push(s)}return r.sort().join("&")}function ae(e){var t,n,r=[],i=ee(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;n=o,"[object String]"===te.call(n)?r.push(o.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):o&&o.source&&r.push(o.source)}}catch(e){i.e(e)}finally{i.f()}return r.length?new RegExp(r.join("|"),"i"):null}function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/(^\s*)|(\s*$)/g,"")}var ce=new function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";this.encode=function(t){var n,r,i,o,a,s,c,l="",d=0;for(t=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(t);d<t.length;)o=(n=t.charCodeAt(d++))>>2,a=(3&n)<<4|(r=t.charCodeAt(d++))>>4,s=(15&r)<<2|(i=t.charCodeAt(d++))>>6,c=63&i,isNaN(r)?s=c=64:isNaN(i)&&(c=64),l=l+e.charAt(o)+e.charAt(a)+e.charAt(s)+e.charAt(c);return l},this.decode=function(t){var n,r,i,o,a,s,c="",l=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<t.length;)n=e.indexOf(t.charAt(l++))<<2|(o=e.indexOf(t.charAt(l++)))>>4,r=(15&o)<<4|(a=e.indexOf(t.charAt(l++)))>>2,i=(3&a)<<6|(s=e.indexOf(t.charAt(l++))),c+=String.fromCharCode(n),64!=a&&(c+=String.fromCharCode(r)),64!=s&&(c+=String.fromCharCode(i));return c=function(e){var t,n,r,i="",o=0;t=n=0;for(;o<e.length;)(t=e.charCodeAt(o))<128?(i+=String.fromCharCode(t),o++):t>191&&t<224?(n=e.charCodeAt(o+1),i+=String.fromCharCode((31&t)<<6|63&n),o+=2):(n=e.charCodeAt(o+1),r=e.charCodeAt(o+2),i+=String.fromCharCode((15&t)<<12|(63&n)<<6|63&r),o+=3);return i}(c),c}};function le(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.unshift("<JS Agent>:"),console.warn.apply(console,t)}function de(e,t){le("发送服务请求：",e+="?"+oe(t));var n=new Image;return n.src=e,n}function ue(e){var t,n=[],r=/^\s*at((?:\s\S+)+) \(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=/^\s*(.+)@\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,o=ee(e.stack.split("\n"));try{for(o.s();!(t=o.n()).done;){var a=t.value,s=r.exec(a)||i.exec(a);if(s){var c={url:s[2],func:se(s[1]),line:Number(s[3]),column:Number(s[4])};n.push(c)}}}catch(e){o.e(e)}finally{o.f()}return n}var pe=function(){function e(){G(this,e),this.init(),this.limit=5,this.actionInfo={userTraceDom:[],userTraceEvent:[],userTraceTs:[]}}return Y(e,[{key:"pushLimit",value:function(e,t){e.push(t),e.length>this.limit&&e.shift()}},{key:"addItem",value:function(e,t){this.pushLimit(this.actionInfo.userTraceDom,encodeURIComponent(e)),this.pushLimit(this.actionInfo.userTraceEvent,t),this.pushLimit(this.actionInfo.userTraceTs,(new Date).getTime())}},{key:"init",value:function(){var e=this;window.addEventListener("click",(function(t){e.addItem(function(e){if(e instanceof Element)try{for(var t=[];e&&e.nodeType===Node.ELEMENT_NODE;){var n=e.nodeName.toLowerCase();if(e.id){n+="#"+e.id,t.unshift(n);break}for(var r=e,i=1;r=r.previousElementSibling;)r.nodeName.toLowerCase()==n&&i++;if(1!=i&&(n+=":nth-of-type("+i+")"),t.unshift(n),!(e=e.parentNode))break}return t.join(">").replace(/div/g,"d").replace(/span/g,"s").replace(/header/g,"h").replace(/footer/g,"f").replace(/nth-of-type/g,"nth")}catch(e){return""}}(t.target),"click")}),!1)}},{key:"getActionInfo",value:function(){return this.actionInfo}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}(),fe=navigator.userAgent.toLowerCase(),me=fe.split(";"),he=-1!=fe.indexOf("jdapp"),ge="jdlog"===me[1]?"android"===me[2]:"android"===me[1],we="jdlog"===me[1]?"iphone"===me[2]:"iphone"===me[1],ye=-1!=fe.indexOf("ipad");var ve={id:null,endpoint:"//h5speed.m.jd.com/v3/exception",rate:1,ignoreErrors:[],ignoreUrls:[],stackLimit:10,flag:10,autoReport:!0},be={net:1,busniess:2,business:2,others:3,code:4,resource:5,unhandlerejection:6,fetcherror:7,ajaxerror:8,ajaxtimeout:9},Se=1,ke=2,Ae=function(){function e(){var t=this;G(this,e),this.VERSION="3.0.2-alpha.0",this._config=null,this._installed=!1,this._ignoreOnError=!1,this._lastException=null,this._needReport=!1,this._plugins={},this._ignoreErrors=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/(\w*\s*)missing \) after argument list(\w*\s*)/,/(\w*\s*)\'offsetWidth\'(\s*)of(\s*)null(\s*\w*)/],this._ignoreUrls=[/.jd-jssdk.min.js$/],this._interceptors=[],this._action=pe.getInstance(),this._autoReport=!0,function(){var e=window&&window.navigator?navigator.userAgent:"",t=/^jdapp/i.test(e),n=/ip(hone|od)|ipad/i.test(e),r=/android/i.test(e)&&!n;return new Promise((function(e){if(t){var i="getNetWorkType";window[i]||(window[i]=function(t){e({status:"0",msg:"success",data:t})});try{n&&window.webkit?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"getNetWorkType",params:i}):r&&window.JDAppUnite&&window.JDAppUnite.getNetWorkType(i)}catch(t){e({msg:"fail",data:"error"})}}else{if(window&&window.navigator){var o=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{},a=o.type||o.effectiveType||"unknown";e({msg:"success",data:a})}e({msg:"fail",data:"error"})}}))}().then((function(e){"success"===e.msg&&(t.network=e.data)})).catch((function(e){}))}return Y(e,[{key:"init",value:function(e){if(this._config=ne({},ve,e),this._needReport=Math.random()<this._config.rate,this._config.flag){if(this._installed)return;this._autoReport=!!this._config.autoReport,this._ignoreErrors=this._ignoreErrors.concat(this._config.ignoreErrors),this._ignoreErrors=ae(this._ignoreErrors),this._ignoreUrls=this._ignoreUrls.concat(this._config.ignoreUrls),this._ignoreUrls=ae(this._ignoreUrls),this._wrapBuiltIns(),this._installPlugins(),this._installed=!0}else le("config.flag 没有配置，必须配置flag.");return this}},{key:"addPlugin",value:function(e){if("function"==typeof e&&e.name&&!this._plugins[e.name]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._plugins[e.name]={args:n,fn:e,installed:!1},this._installed&&this._installPlugins()}return this}},{key:"addInterceptor",value:function(e){"function"==typeof e&&(this._interceptors||(this._interceptors=[]),this._interceptors.push(e))}},{key:"removeInterceptor",value:function(e){if("function"==typeof e&&this._interceptors){var t=this._interceptors.indexOf(e);t>-1&&this._interceptors.splice(t,1)}}},{key:"_installPlugins",value:function(){for(var e in this._plugins){var t=this._plugins[e];t.installed||(t.fn.apply(this,[this].concat(t.args)),t.installed=!0)}}},{key:"reportException",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this,o={type:e.name,stack:ue(e).slice(0,i._config.stackLimit)};if(o.stack.length){var a=o.stack[0];o.row=a.line,o.col=a.column,o.file=a.url}var s={errType:be.code,errCode:750,errMsg:e.message,exceptionInfo:o};t&&(s.extraData=t),s.errLevel="number"==typeof n?n:4,s.reType=r?Se:ke,this._ignoreErrors&&this._ignoreErrors.test(e.message)||this._ignoreUrls&&this._ignoreUrls.test(e.file)||this._send(s)}},{key:"report",value:function(e,t,n,r,i){var o;if(1===arguments.length&&"object"===arguments[0]){var a=arguments[0];o={errType:a.errType,errCode:a.errCode,errMsg:a.errMsg,errLevel:4,reType:Se}}else o={errType:e,errCode:t,errMsg:n,reType:ke},r&&(o.extraData=r),o.errLevel="number"==typeof i?i:4;this._send(o)}},{key:"reportByJSbridge",value:function(e,t,n,r){var i={errType:e,errCode:t,errMsg:n};r&&(i.extraData=r),he?this._sendByJSbridge(i):this._send(i)}},{key:"wrap",value:function(e){if(e){if(e._wrapped)return e._wrapped;var t=this;if("function"!=typeof e&&"function"==typeof e.handleEvent){var n=e.handleEvent;return e.handleEvent=function(){try{for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];n.apply(e,i)}catch(e){throw t.reportException(e,null,4,!0),t._ignoreNextOnError(),e}},e._wrapped=e,e}var r=function(){try{for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}catch(e){throw t.reportException(e,null,4,!0),t._ignoreNextOnError(),e}};return"function"!=typeof e?e:(e._wrapped=r,r)}}},{key:"_wrapBuiltIns",value:function(){if(this._autoReport){for(var e=this,t=0,n=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];t<n.length;t++){i(n[t])}r(window,"setTimeout",a),r(window,"setInterval",a),window.requestAnimationFrame&&r(window,"requestAnimationFrame",o),window.$&&window.$.fn&&window.$.fn.ready&&r($.fn,"ready",o),r(window,"onerror",(function(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e._ignoreOnError||e._ignoreErrors&&e._ignoreErrors.test(r[0])||e._ignoreUrls&&e._ignoreUrls.test(r[1])||e.reportException(r[4]||new Error("window.onerror"),null,4,!0),t&&t.apply(this,r)}})),window.addEventListener("error",(function(t){var n=t.target;if("SCRIPT"===n.tagName||"LINK"===n.tagName){var r=n.src||n.href;e.report({errType:be.resource,errCode:0,errMsg:"".concat(r," 没有加载成功.")})}}),!0)}function r(e,t,n){var r=e[t];e[t]=n(r)}function i(t){var n=window[t]&&window[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(r(n,"addEventListener",(function(t){return function(n,r,i,o){return t.call(this,n,e.wrap(r),i,o)}})),r(n,"removeEventListener",(function(e){return function(t,n,r){return e.call(this,t,n&&n._wrapped||n,r)}})))}function o(t){return function(n){return t.call(this,e.wrap(n))}}function a(t){return function(n,r){return t.call(this,e.wrap(n),r)}}}},{key:"_send",value:function(e){if(this._interceptors&&this._interceptors.length>0){var t,n=ee(this._interceptors);try{for(n.s();!(t=n.n()).done;){if(!(e=(0,t.value)(e)))return}}catch(e){n.e(e)}finally{n.f()}}var r=JSON.stringify(e);if(r!==this._lastException&&(this._lastException=r,this._needReport)){var i=this._action.getActionInfo(),o=i.userTraceDom,a=i.userTraceEvent,s=i.userTraceTs,c=document.getElementsByTagName("title")[0]&&document.getElementsByTagName("title")[0].innerText||"",l={flag:this._config.flag,rts:Date.now(),libVer:this.VERSION,url:window.location.href.split("?")[0]||"",title:c,userTraceDom:o,userTraceEvent:a,userTraceTs:s,network:this.network||"unknown"};ne(l,e),le(l),de(this._config.endpoint,{data:ce.encode(JSON.stringify(l))})}}},{key:"_sendByJSbridge",value:function(e){if(this._interceptors&&this._interceptors.length>0){var t,n=ee(this._interceptors);try{for(n.s();!(t=n.n()).done;){if(!(e=(0,t.value)(e)))return}}catch(e){n.e(e)}finally{n.f()}}var r=e,i=r.errType,o=r.errCode,a=r.errMsg,s=r.extraData,c=void 0===s?{}:s,l=this._action.getActionInfo(),d=l.userTraceDom,u=l.userTraceEvent,p=l.userTraceTs,f=document.getElementsByTagName("title")[0]&&document.getElementsByTagName("title")[0].innerText||"",m={errCode:o,flag:this._config.flag,rts:Date.now(),libVer:this.VERSION,title:f,userTraceDom:d,userTraceEvent:u,userTraceTs:p,network:this.network||"unknown"},h={businessType:"exceptionReport",params:{functionInfo:"".concat(i),errMsg:a,exceptionInfo:JSON.stringify(m),url:window.location.href.split("?")[0]||"",extra:JSON.stringify(c)}};le(h);try{!function(e){if(we||ye)try{window.webkit&&window.webkit.messageHandlers.JDAppUnite.postMessage({method:"notifyMessageToNative",params:e})}catch(e){console.log("jsbridge 上报异常",e)}else if(ge)try{window.JDAppUnite&&window.JDAppUnite.notifyMessageToNative(e)}catch(e){console.log("jsbridge 上报异常",e)}}(JSON.stringify(h))}catch(e){console.warn("report by bridge error...",e)}}},{key:"_ignoreNextOnError",value:function(){var e=this;this._ignoreOnError=!0,setTimeout((function(){return e._ignoreOnError=!1}))}}]),e}(),Te=window.JSAgent,Ie=new Ae;Ie.noConflict=function(){return window.JSAgent=Te,Ie},Ie.EXCEPTION_TYPE=be;var Oe=Ie;function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function Re(e){return"function"==typeof e}function Ue(e){return"[object Object]"===Pe(e)}function De(e){return"[object Array]"===Pe(e)}function Ee(e){return"[object Null]"===Pe(e)}function Me(e){return"string"==typeof e}function _e(e){return"[object Number]"===Pe(e)}function Be(e){if(!e)return"";var t=new RegExp("(?:^|; )".concat(e,"(?:=([^;]*?))?(?:;|$)")).exec(document.cookie);return null!==t?decodeURIComponent(t[1]):""}function xe(e,t,n){if(Me(e)&&e&&t)if(n){var r=je(je({},n),{},{secure:void 0!==n.secure&&n.secure});document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(function(e){var t=e||{},n="";return n+=t.path?";path=".concat(t.path):"",n+=t.domain?";domain=".concat(t.domain):"",n+=t.expires?";expires=".concat(t.expires.toUTCString()):"",n+(t.secure?";secure":"")}(r))}else document.cookie="".concat(e,"=").concat(encodeURIComponent(t))}function He(e,t){(t||{}).expires=new Date(0),xe(e,"",t)}function Le(e){return e.replace(/s\d{1,4}x\d{1,4}_/g,"")}function We(e){var t=(e||window.location.search).replace(/(^\?)/,"");if("string"!=typeof t||!t)return{};var n={};return t.split("&").map((function(e){var t=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}(e,"=");return n[t[0]]=t[1],e})),n}function Fe(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")}function qe(){return window&&window.navigator?navigator.userAgent:""}function Ve(e,t){var n=t||qe();return"wx"===e?/micromessenger/i.test(n):"qq"===e?/qq\//i.test(n):"weibo"===e?/weibo/i.test(n):"jd"===e?/^jdapp/i.test(n):"jdlittle"===e?/^jdltapp/i.test(n):"mp"===e&&(/micromessenger/i.test(n)&&/miniprogram/i.test(n)||"miniprogram"===window.__wxjs_environment)}function Xe(){return Ve("jd")}function ze(e){var t=e||qe();return/ip(hone|od)|ipad/i.test(t)}function $e(e){var t=e||qe();return/android/i.test(t)&&!ze()}function Qe(e,t){var n=t||qe();return"jd"===e?n.split(";")[2]||"":"wx"===e?/micromessenger\/([\S]*)/i.test(n)?RegExp.$1:"":"qq"===e&&/qq\/([\S]*)/i.test(n)?RegExp.$1:""}function Ge(e){var t=(e||qe()).match(/android\s([0-9\.]*)/i);return t?t[1]:""}function Ke(e){var t=(e||qe()).match(/OS ((\d+_?){2,3})\s/i);return t?t[1].replace(/_/g,"."):""}function Ye(e,t){if(e===t)return 0;var n=e.split("."),r=t.split("."),i=Math.abs(n.length-r.length),o=new Array(i).fill("0");n.length>r.length?r=r.concat(o):n.length<r.length&&(n=n.concat(o));for(var a=0;a<n.length;a++){var s=parseInt(n[a],10),c=parseInt(r[a],10);if(s>c)return 1;if(s<c)return-1}return 0}function Ze(e){return"".concat(e,"_").concat((new Date).getTime(),"_").concat(Math.floor(1e3*Math.random()))}function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=t.split(".");return 0===r.length?n:r.reduce((function(e,t){return e&&e[t]?e[t]:void 0}),e)||n}function tt(e,t){var n=e.ios,r=e.android;return ze()?!0===n||(!!et(window,n)||(t({status:"-100",msg:"JSBridge[IOS] 不存在: ".concat(n)}),!1)):$e()?!0===r||(!!et(window,r)||(t({status:"-100",msg:"JSBridge[Android] 不存在: ".concat(r)}),!1)):(t({status:"-100",msg:"未检测到运行环境"}),!1)}function nt(e,t){return e.includes("registerCode")&&!window.__WEBVIEW_REGISTER_CODE__?(t({status:"-100",msg:"webview register code不存在，请在确保在当前页面调用过注册方法"}),!1):e.includes("jd")&&!Xe()?(t({status:"-100",msg:"不在京东app内"}),!1):!(e.includes("xview")&&!window.XView)||(t({status:"-100",msg:"不在XView容器内"}),!1)}function rt(e,t,n){var r=Qe(e);return-1!==Ye(r,t)||(n({status:"-100",msg:"该功能在v".concat(t,"及以上生效: 当前版本").concat(r)}),!1)}function it(e){try{delete window[e]}catch(t){window[e]=void 0}}function ot(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}var at={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:""};function st(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=e,o=n.timeout||at.timeout,a=n.jsonpCallback||at.jsonpCallback;return new Promise((function(s,c){var l=n.jsonpCallbackFunction||Ze("jsonp"),d="".concat(a,"_").concat(l);window[l]=function(e){s(e),t&&clearTimeout(t),ot(d),it(l)};var u=document.createElement("script");r?u.innerText=r:(i+=-1===i.indexOf("?")?"?":"&",u.setAttribute("src","".concat(i).concat(a,"=").concat(l))),n.charset&&u.setAttribute("charset",n.charset),u.id=d,document.getElementsByTagName("head")[0].appendChild(u),t=setTimeout((function(){c(new Error("JSONP request to ".concat(e," timed out"))),it(l),ot(d),window[l]=function(){it(l)}}),o),u.onerror=function(){c(new Error("JSONP request to ".concat(e," failed"))),it(l),ot(d),t&&clearTimeout(t)}}))}function ct(e,t){return new Promise((function(n,r){var i=Ze("preloadJSONP"),o=window.hybridId||t.hybridId;if(function(e,t,n,r,i){window[i]=function(o){try{var a=JSON.parse(o);-2===a.status||-1===a.status?(console.warn("HybridJsonp[Fail]：预加载请求失败 status ".concat(a.status)),st(n,r).then((function(t){e(t)})).catch((function(e){t(e)}))):(console.warn("HybridJsonp[success]：预加载请求成功"),st("preload",r,a.data).then((function(t){e(t)})).catch((function(e){t(e)})),it(i))}catch(e){console.warn("JSONP Error: JsonpPreload parse",e)}}}(n,r,e,t,i),ze()&&et(window,"webkit.messageHandlers.JDHybrid.postMessage"))window.webkit.messageHandlers.JDHybrid.postMessage({method:"getPreloadData",params:{callBackName:i,appId:o}});else{if(!$e()||!et(window,"JDHybrid.fetchPreloadData"))return console.warn("HybridJsonp[Fail]：未检测到环境或bridge，降级为Jsonp"),st(e,t).then((function(e){n(e)})).catch((function(e){r(e)}));window.JDHybrid.fetchPreloadData(o,i)}}))}var lt=!0;function dt(e,t){return new Promise((function(n,r){window[t]=function(e){var t;try{t=JSON.parse(e)}catch(t){r("bridge data解析错误: ".concat(e))}n(t)},ze()?window.webkit.messageHandlers.JDHybrid.postMessage({method:"getPreloadData",params:{callBackName:t,appId:e}}):$e()&&window.JDHybrid.fetchPreloadData(e,t)}))}function ut(e,t,n,r){return new Promise((function(r,i){window[n]=function(e){var t;try{t=JSON.parse(e)}catch(t){i("bridge data解析错误: ".concat(e))}r(t)},ze()?window.webkit.messageHandlers.JDHybrid.postMessage({method:"getPreloadData",params:{callBackName:n,appId:e,request_id:t}}):$e()&&window.JDHybridPreload.fetchPreloadData(e,t,n)}))}var pt=null;function ft(e){return"openApp.jdMobile://virtual?params=".concat(encodeURIComponent(JSON.stringify(e)))}function mt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openAppParams,n=e.url;if(Ve("jd"))if(t)location.href=ft(t);else if(n){var r={category:"jump",des:"m",action:"to",url:n};location.href=ft(r)}else console.log("参数错误");else n?location.href=n:console.log("缺少站外url链接")}window.JD&&window.JD.wxappext&&(pt=window.JD.wxappext);var ht=Oe.EXCEPTION_TYPE;e.ImgUrlRemoveSize=Le,e.ImgUrlSetSize=function(e,t){if(!e)return"";if(e=Le(e),!t)return e;var n="s".concat(t,"_jfs");return e.replace(/jfs/g,n)},e.JSAGENT_EXCEPTION_TYPE=ht,e.addReminder=function(){return o.addReminder.apply(o,arguments)},e.backControlRouter=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n))if(Re(e)){if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"MobileNavi.enableWebControlBack"},n)){var r=Ze("enableWebControlBack");window[r]=function(e){var i;try{i=JSON.parse(e),t(i)}catch(t){n({status:"-100",msg:"bridge result JSON parse error",data:e})}delete window[r]},window.jdWebviewClickBackCallBack=e,ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"callRouterModuleWithParams",params:{routerURL:"router://JDWebViewBusinessModule/enableWebControlBack",routerParam:{businessType:"enableWebControlBack"},callBackName:r,callBackId:r}}):$e()&&window.MobileNavi.enableWebControlBack(JSON.stringify({callBackName:r}))}}else n({status:"-100",msg:"返回回调函数错误"})}))},e.callApp=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href;if(!Ve("jd")){var n={NoJumpDownLoadPage:e,downAppURl:"https://h5.m.jd.com/active/download/download.html?channel=jd-m",downAppIos:"https://itunes.apple.com/us/app/jing-dong-wang-gou-shou-dan/id414245413",downWeixin:"https://a.app.qq.com/o/simple.jsp?pkgname=com.jingdong.app.mall&g_f=991850",downIpad:"https://itunes.apple.com/cn/app/jing-dong-hd/id434374726?mt=8",inteneUrl:"openApp.jdMobile://virtual?",inteneUrlParams:{category:"jump",des:"m",action:"to",url:encodeURIComponent(t)}};$&&$.immediateOpenApp?$.immediateOpenApp(n):console.log("唤起app失效")}},e.callRouter=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)){if(!e.routerURL)return n({status:"-100",msg:"routerURL不存在"});if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.callRouterModuleWithParams"},n)){var r=Ze("callRouter");window[r]=function(e){var i;try{i=JSON.parse(e),t(i)}catch(t){n({status:"-100",msg:"bridge result JSON parse error",data:e})}delete window[r]};var i=Object.assign({},{routerURL:"",routerParam:{},customArg:"",callBackName:r,callBackId:r},e);ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"callRouterModuleWithParams",params:JSON.stringify(i)}):$e()&&window.JDAppUnite.callRouterModuleWithParams(JSON.stringify(i))}}}))},e.callSharePane=function(){return r.callSharePane.apply(r,arguments)},e.closeWebview=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){var n={ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:!0};if(!1!==tt(n,t)){if(ze())return window.webkit.messageHandlers.JDAppUnite.postMessage({method:"callRouterModuleWithParams",params:{routerURL:"router://JDWebViewBusinessModule/closeWebview",callBackName:null,callBackId:null}}),e({status:"0000",msg:"JSBridge[IOS] 已执行: ".concat(n.ios," callRouterModuleWithParams")});if($e()){var r="closeJDApp://webview?refresh=true";return window.location.href=r,e({status:"0000",msg:"schema[Android] 已执行: ".concat(r)})}}}}))},e.concatQueryString=function(e,t){return e+(/\?/.test(e)?"&":"?")+t},e.configNavigationBar=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)){if(!Ue(e))return n({status:"-100",msg:"传入参数错误"});if("2"===e.canPull&&!1===rt("jd","10.0.0",n))return n({status:"-100",msg:"h5自定义下拉，需要app版本大于10.0.0"});var r={ios:"webkit.messageHandlers.MobileNavi.postMessage",android:"MobileNavi.configNavigationBar"};if(!1!==tt(r,n)){var i=Ze("configNavigationBar");if(window[i]=function(e){var r;try{r=JSON.parse(e),t(r)}catch(t){n({status:"-100",msg:"bridge result JSON parse error",data:e})}delete window[i]},e.callBackName=i,ze()){if(window.webkit.messageHandlers.MobileNavi.postMessage({method:"configNavigationBar",params:JSON.stringify(e)}),-1===Ye(Ke(),"9.1.6"))return delete window[i],t({status:"0000",msg:"JSBridge[IOS] 已执行: ".concat(r.ios)})}else if($e()&&(window.MobileNavi.configNavigationBar(JSON.stringify(e)),-1===Ye(Ge(),"8.3.6")))return delete window[i],t({status:"0000",msg:"JSBridge[Android] 已执行: ".concat(r)})}}}))},e.configNavigationButton=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)){if(!Ue(e))return n({status:"-100",msg:"参数错误或不存在"});var r={ios:"webkit.messageHandlers.MobileNavi.postMessage",android:"MobileNavi.configBtnSince610"};if(!1!==tt(r,n))return ze()?(window.webkit.messageHandlers.MobileNavi.postMessage({method:"configBtnSince610",params:JSON.stringify(e)}),t({status:"0000",msg:"JSBridge[IOS] 已执行: ".concat(r.ios)})):$e()?(window.MobileNavi.configBtnSince610(JSON.stringify(e)),t({status:"0000",msg:"JSBridge[Android] 已执行: ".concat(r.android)})):void 0}}))},e.cookieEnabled=function(){return window&&window.navigator&&navigator.cookieEnabled},e.deleteReminder=function(){return o.deleteReminder.apply(o,arguments)},e.emptyCookie=function(){document.cookie.split(/;\s/).forEach((function(e){return He(e.split("=")[0]||e)}))},e.getAllCookies=function(){var e={};return document.cookie.split(/;\s/).forEach((function(t){var n=t.split("=");e[n[0]]=2===n.length?n[1]:void 0})),e},e.getAndroidVersion=Ge,e.getAppVersion=Qe,e.getCookie=Be,e.getDeviceInfo=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.getPhoneBasicInfo"},t)){var n=Ze("getPhoneBasicInfo");window[n]=function(r){var i;try{if((i=JSON.parse(r))&&Ue(i.data)){var o=i.data,a={},s=["lng","lat","cAddressGlobal","addressGlobal","ip"];for(var c in o)-1===s.indexOf(c)&&(a[c]=o[c]);Object.assign(i,{data:a})}e(i)}catch(e){t({status:"-100",msg:"bridge result JSON parse error",data:r})}delete window[n]},ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"getPhoneBasicInfo",params:n}):$e()&&window.JDAppUnite.getPhoneBasicInfo(n)}}}))},e.getIOSVersion=Ke,e.getNavigationStatusHeight=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){if(!1!==tt({ios:"webkit.messageHandlers.MobileNavi.postMessage",android:"MobileNavi.getActualNaviStatusHeight"},t)){var n=Ze("getNaviStatusHeight");if(window[n]=function(r){var i;try{i=JSON.parse(r),e(i)}catch(e){t({status:"-100",msg:"bridge result JSON parse error",data:r})}delete window[n]},ze()){if(!1===rt("jd","9.1.6",t))return void delete window[n];window.webkit.messageHandlers.MobileNavi.postMessage({method:"callRouterModuleWithParams",params:{routerURL:"router://JDWebViewBusinessModule/getActualNaviStatusHeight",callBackName:n}})}else $e()&&window.MobileNavi.getActualNaviStatusHeight(n)}}}))},e.getNetwork=function(e){var t=e||qe(),n=/nettype\/(\S*)/i;return Ve("jd",t)&&(n=/network\/([^;]*)/i),n.test(t)?RegExp.$1.toLowerCase():"unknown"},e.getNetwrokStatus=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.getNetWorkType"},t)){var n=Ze("getNetWorkType");window[n]=function(t){e({status:"0",msg:"success",data:t}),delete window[n]},ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"getNetWorkType",params:n}):$e()&&window.JDAppUnite.getNetWorkType(n)}}}))},e.getUUID=function(e){return Xe()?("string"==typeof e?e:qe()).split(";")[4]:Be("mba_muid")},e.getUrlQuery=function(e,t){var n=We(t);if(!e)return n;if(De(e)){for(var r={},i=0;i<e.length;i+=1)r[e[i]]=n[e[i]]||null;return r}return n[e]},e.getUserAgent=qe,e.goBackRouter=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){var n={ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.notifyMessageToNative"};if(!1!==tt(n,t))return ze()?(window.webkit.messageHandlers.JDAppUnite.postMessage({method:"callRouterModuleWithParams",params:JSON.stringify({routerURL:"router://JDWebViewBusinessModule/enableWebControlBack",routerParam:{businessType:"goBack"},callBack:null,callBackId:null})}),e({status:"0000",msg:"JSBridge[IOS] 已执行: ".concat(n.ios)})):$e()?(window.JDAppUnite.notifyMessageToNative(JSON.stringify({businessType:"goBack"})),e({status:"0000",msg:"JSBridge[Android] 已执行: ".concat(n.android)})):void 0}}))},e.hybridJSONP=function(e,t){try{if(lt)return lt=!1,ct(e,t);throw"非首次调用：firstFlag ".concat(lt)}catch(n){return console.warn("HybridJsonp[Fail]：降级为普通JSONP请求",n),st(e,t)}},e.hybridMutiPreload=function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a="JDHybridPreloadFetchCallback_"+t,s="HYBRID_PRELOAD_"+t;try{if(!e)throw"hybridId不存在，请在hybrid平台获取正确的hybridId";if(!t)throw"requestId不存在，请在hybrid平台获取正确的requestId";if("function"!=typeof n)throw"http参数类型不合法, 该参数应为网络请求函数";var c;if(ze()?c="webkit.messageHandlers.JDHybrid.postMessage":$e()&&(c="JDHybridPreload.fetchPreloadData"),!et(window,c))throw"bridge不存在当前方法".concat(c);window[s]=0}catch(e){return console.warn("HybridPreload[Fail]：降级为H5请求",e),n.apply(void 0,i)}return ut(e,t,a).then((function(e){return-3===e.status||-2===e.status||-1===e.status?(console.warn("HybridPreload[Fail]：预加载接口请求失败 status ".concat(e.status)),window[s]=-1,n.apply(void 0,i)):(console.warn("HybirdPreload[Success]：预加载接口请求成功"),window[s]=1,e.data)})).catch((function(e){return console.warn("HybridPreload[Fail]：降级为H5请求",e),n.apply(void 0,i)}))},e.hybridPreload=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=window.hybridId||e,a="JDHybridPreloadFetchCallback";window.HYBRID_PRELOAD_STATUS=-1;try{if(!o)throw"hybridId不存在，未在hybrid平台发布请传入正确的hybridId";if("function"!=typeof t)throw"http参数类型不合法, 该参数应为网络请求函数";var s;if(ze()?s="webkit.messageHandlers.JDHybrid.postMessage":$e()&&(s="JDHybrid.fetchPreloadData"),!et(window,s))throw"bridge不存在当前方法".concat(s);if(window[a])throw"preloadFetch请求只支持一个接口，请检查是否接入了多个预加载请求"}catch(e){return console.warn("HybridPreload[Fail]：降级为H5请求",e),t.apply(void 0,r)}return dt(o,a).then((function(e){return-2===e.status||-1===e.status?(console.warn("HybridPreload[Fail]：预加载接口请求失败 status ".concat(e.status)),t.apply(void 0,r)):(console.warn("HybirdPreload[Success]：预加载接口请求成功"),window.HYBRID_PRELOAD_STATUS=0,e.data)})).catch((function(e){return console.warn("HybridPreload[Fail]：降级为H5请求",e),t.apply(void 0,r)}))},e.hybridRenderTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return new Promise((function(t,n){if(!1!==nt(["jd"],n)){var r={ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDPerformance.transferRenderTime"};if(!1!==tt(r,n))return ze()?(window.webkit.messageHandlers.JDAppUnite.postMessage({method:"notifyMessageToNative",params:JSON.stringify({businessType:"transferRenderTime",params:{renderTime:String(e)}})}),t({status:"0000",msg:"JSBridge[IOS] 已执行: ".concat(r.ios)})):$e()?(window.JDPerformance.transferRenderTime(String(e)),t({status:"0000",msg:"JSBridge[Android] 已执行: ".concat(r.android)})):void 0}}))},e.isAndroid=$e,e.isApp=Ve,e.isArray=De,e.isBoolean=function(e){return"boolean"==typeof e},e.isEncodedUA=function(e){return!Ee(e.match(/ef\/1/))},e.isFunction=Re,e.isIOS=ze,e.isIPad=function(e){var t=e||qe();return!!/ipad/i.test(t)},e.isIPhone=function(e){var t=e||qe();return!!/iphone/i.test(t)},e.isJDApp=Xe,e.isJDAppLogin=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.isAppLogin"},t)){var n=Ze("isAppLogin");window[n]=function(r){var i;try{i=JSON.parse(r),e(i)}catch(e){t({status:"-100",msg:"bridge result JSON parse error",data:r})}delete window[n]},ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"isAppLogin",params:n}):$e()&&window.JDAppUnite.isAppLogin(n)}}}))},e.isMP=function(){return Ve("mp")},e.isMobile=function(e){var t=e||qe();return!!/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/i.test(t)},e.isNull=Ee,e.isNumber=_e,e.isObject=Ue,e.isString=Me,e.isSymbol=function(e){var t=Je(e);return"symbol"===t||"object"===t&&null!=e&&"[object Symbol]"===Pe(e)},e.isTablet=function(e){var t=e||qe();return/ipad/i.test(t)||/android/i.test(t)&&!/mobi|mini|fennec/i.test(t)},e.isUndefined=function(e){return"[object Undefined]"===Pe(e)},e.isWXApp=function(){return Ve("wx")},e.isWebview=function(e,t){var n=t||qe();return"xview"===e?void 0!==window.XView:"wk"===e&&(!!n.match(/supportjdshwk/i)||1===window._is_jdsh_wkwebview)},e.jsagentAddInterceptor=function(){return Oe.addInterceptor.apply(Oe,arguments)},e.jsagentInit=function(){return Oe.init.apply(Oe,arguments)},e.jsagentRemoveInterceptor=function(){return Oe.removeInterceptor.apply(Oe,arguments)},e.jsagentReport=function(){return Oe.report.apply(Oe,arguments)},e.jsagentReportByBridge=function(){return Oe.reportByJSbridge.apply(Oe,arguments)},e.jsagentReportException=function(){return Oe.reportException.apply(Oe,arguments)},e.jumpToMiniProgram=function(e,t){if(Ve("jd"))try{window.jumpToMiniCb=function(e){var t=JSON.parse(e);console.log("jumpToMiniCb回调成功",t)};var n=JSON.stringify({businessType:"jumpToMiniProgram",callBackName:"jumpToMiniCb",params:{username:t||"gh_45b306365c3d",path:e||"/pages/index/index",miniProgramType:0}});console.log("appToWXMiniProgram",n),isWebview("wk")?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"notifyMessageToNative",params:n}):window.JDAppUnite&&window.JDAppUnite.notifyMessageToNative(n)}catch(e){throw new Error(e)}},e.notifyMessage=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)){if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.notifyMessageToNative"},n)){var r=Ze("notifyMessage");window[r]=function(e){try{var r=JSON.parse(e);t(r)}catch(t){n({status:"-100",msg:"bridge result JSON parse error",data:e})}},e.callBackName=r,ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"notifyMessageToNative",params:JSON.stringify(e)}):$e()&&window.JDAppUnite.notifyMessageToNative(JSON.stringify(e))}}}))},e.openSystemBrowser=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)){!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.notifyMessageToNative"},n)&&(ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"callRouterModuleWithParams",params:JSON.stringify({routerURL:"router://JDWebViewAbilityModule/openUrlInSafari",routerParam:{url:e}})}):$e()&&window.JDAppUnite.notifyMessageToNative(JSON.stringify({businessType:"openUrlInBrowser",params:{url:e}})))}}))},e.presetReminderOptions=function(){return o.presetReminderOptions.apply(o,arguments)},e.preventNativeSwipeEvent=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){if(ze())return t({status:"-100",msg:"IOS端无该方法,可以在H5层面直接解决"});if($e()){var n={ios:"",android:"JdAndroid.requestEvent"};if(!1===tt(n,t))return;return window.JdAndroid.requestEvent(!0),e({status:"0000",msg:"JSBridge[Android] 已执行: ".concat(n.android)})}}}))},e.profilerAddKeyValues=function(){return z.addKeyValues.apply(z,arguments)},e.profilerAddPits=function(){return z.addPits.apply(z,arguments)},e.profilerAddStaticFile=function(){return z.addStaticFile.apply(z,arguments)},e.profilerAddStaticFileByLimitedType=function(){return z.addStaticFileByLimitedType.apply(z,arguments)},e.profilerGetServerInfo=function(){return z.getServerInfo()},e.profilerInit=function(){return z.init.apply(z,arguments)},e.profilerModuleReport=function(){return z.moduleReport.apply(z,arguments)},e.profilerReport=function(){return z.report.apply(z,arguments)},e.queryReminder=function(){return o.queryReminder.apply(o,arguments)},e.queryRemindersByTimeSpan=function(){return o.queryRemindersByTimeSpan.apply(o,arguments)},e.registerCode=function(e){e&&(window.__WEBVIEW_REGISTER_CODE__=e)},e.removeCookie=He,e.removeProtocol=function(e){return null!==e.match(/^http:|^https:/i)?e.replace(/^http:|^https:/i,""):e},e.saveImage=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)){if(!1!==tt({ios:"webkit.messageHandlers.MobileNavi.postMessage",android:"JDAppUnite.saveImageToPhoteAlbum"},n)){var r=Ze("saveImageToPhoteAlbum");window[r]=function(i){var o;try{"0"==(o=JSON.parse(i)).code?(t({status:"0",msg:"下载成功"}),delete window[r]):"-1"===o.code?(t({status:"-1",msg:"下载失败"}),delete window[r]):Re(e.processing)&&e.processing(o)}catch(e){n({status:"-100",msg:"bridge result JSON parse error",data:i})}};var i={imgUrl:e.url,callBackName:r,callBackId:r,permission_desc:e.permission_desc};ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"saveImageToPhoteAlbum",params:JSON.stringify(i)}):$e()&&window.JDAppUnite.saveImageToPhoteAlbum(JSON.stringify(i))}}}))},e.saveVideo=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)){if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.notifyMessageToNative"},n)){var r=Ze("saveVideo");window[r]=function(i){try{var o=JSON.parse(i);"0"==o.status||"-1"===o.status?(t(o),delete window[r]):Re(e.processing)&&e.processing(o)}catch(e){n({status:"-100",msg:"bridge result JSON parse error",data:i})}};var i={businessType:"saveVideoToAlbum",callBackName:r,params:{callBackId:r,url:e.url}};ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"notifyMessageToNative",params:JSON.stringify(i)}):$e()&&window.JDAppUnite.notifyMessageToNative(JSON.stringify(i))}}}))},e.scanOrderNo=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){if(!1!==tt({ios:"webkit.messageHandlers.MobileNavi.postMessage",android:"MobileNavi.showNativeBarcodeScan"},t)){var n=Ze("scanOrderNo");window[n]=function(r){try{var i=JSON.parse(r);e({status:"0",msg:"success",data:i})}catch(e){t({status:"-100",msg:"bridge result JSON parse error",data:r})}delete window[n]},ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"showNativeBarcodeScan",params:n}):$e()&&window.MobileNavi.showNativeBarcodeScan(n)}}}))},e.sendDirectShare=function(){return r.sendDirectShare.apply(r,arguments)},e.serialize=Fe,e.setBiologicalProbe=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)){if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.notifyMessageToNative"},n)){var r=Ze("bridgeBiologicalProbe");window[r]=function(e){var i;try{i=JSON.parse(e),t(i)}catch(t){n({status:"-100",msg:"bridge result JSON parse error",data:e})}delete window[r]};var i={businessType:"bridgeBiologicalProbe",callBackName:r,params:e};ze()?window.webkit.messageHandlers.JDAppUnite.postMessage({method:"notifyMessageToNative",params:JSON.stringify(i)}):$e()&&window.JDAppUnite.notifyMessageToNative(JSON.stringify(i))}}}))},e.setCookie=xe,e.setNavigationTheme=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){if(!1!==tt({ios:"webkit.messageHandlers.MobileNavi.postMessage",android:"MobileNavi.configThemeNavigator"},t)){var n=Ze("configThemeNavigator");window[n]=function(r){var i;try{i=JSON.parse(r),e(i)}catch(e){t({status:"-100",msg:"bridge result JSON parse error",data:r})}delete window[n]};var r=JSON.stringify({callBackName:n});ze()?window.webkit.messageHandlers.MobileNavi.postMessage({method:"configThemeNavigator",params:r}):$e()&&window.MobileNavi.configThemeNavigator(r)}}}))},e.setShareInfo=function(){return r.setShareInfo.apply(r,arguments)},e.settingsRouter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"android.settings.SETTINGS";return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)&&!1!==rt("jd","10.2.6",n)){if(!1!==tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.callSyncRouterModuleWithParams"},n)){var r=Ze("configNavigationBar");if(window[r]=function(e){var i;try{i=JSON.parse(e),t(i)}catch(t){n({status:"-100",msg:"bridge result JSON parse error",data:e})}delete window[r]},ze()){var i={routerURL:"router://JDBWebViewUtilsModule/openSetting",callBackName:r};window.webkit.messageHandlers.JDAppUnite.postMessage({method:"callRouterModuleWithParams",params:JSON.stringify(i)})}else if($e()){var o={routerURL:"router://com.jingdong.common.web.javainterface.SettingsRouter/navigate",routerParam:e,callBackName:r,callBackId:"1"};window.JDAppUnite.callSyncRouterModuleWithParams(JSON.stringify(o))}}}}))},e.showNavigationCloseButton=function(){return new Promise((function(e,t){if(!1!==nt(["jd","registerCode"],t)){var n={ios:"webkit.messageHandlers.MobileNavi.postMessage",android:"MobileNavi.showCloseBtn"};if(!1!==tt(n,t))return ze()?(window.webkit.messageHandlers.MobileNavi.postMessage({method:"showCloseBtn"}),e({status:"0000",msg:"JSBridge[IOS] 已执行: ".concat(n.ios)})):$e()?(window.MobileNavi.showCloseBtn(),e({status:"0000",msg:"JSBridge[Android] 已执行: ".concat(n.android)})):void 0}}))},e.toBindMobile=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href;location.href="https://sec.m.jd.com/todo/bindMobile?returnUrl=".concat(encodeURIComponent(e))},e.toCouponBuy=function(e){mt({openAppParams:{category:"jump",des:"productList",from:"couponBatch",couponId:e,intel:"22"},url:"https://so.m.jd.com/list/couponSearch.action?couponbatch=".concat(e)})},e.toCouponCenter=function(){mt({openAppParams:{category:"jump",des:"couponCenter"},url:"https://coupon.m.jd.com/center/getCouponCenter.action"})},e.toCustomerService=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.entryCode,n=e.url,r=void 0===n?"https://jdcs.m.jd.com/after/index.action":n;mt({openAppParams:{category:"jump",des:"im",venderId:"1",entry:t},url:r})},e.toLink=function(e){e?Ve("mp")&&pt?/^\/pages\//.test(e)?pt.goto(e,"navigateTo"):pt.goto("/pages/h5/index?encode_url=".concat(encodeURIComponent(e)),"navigateTo"):mt({url:e}):console.log("缺少跳转链接link")},e.toLogin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.WQ_BIZ,n=void 0===t?"gamingcentre":t,r=e.jumpBackUrl,i=void 0===r?location.href:r;if(Ve("wx")||Ve("qq"))location.href="https://wq.jd.com/pinbind/pintokenredirect?biz=".concat(n,"&url=")+encodeURIComponent(i);else{var o="https://plogin.m.jd.com/user/login.action",a={appid:100,v:1,qqlogin:!1,wxlogin:!1,loginonestep:!1,returnurl:encodeURIComponent(i)};location.href="".concat(o,"?").concat(Fe(a))}},e.toMyCart=function(){mt({openAppParams:{category:"jump",des:"cartB"},url:"https://p.m.jd.com/cart/cart.action"})},e.toMyCoupon=function(){mt({openAppParams:{category:"jump",des:"mycoupon"},url:"https://wqs.jd.com/my/coupon/index.shtml"})},e.toMyRedbag=function(){mt({openAppParams:{category:"jump",des:"jdreactcommon",modulename:"JDReactMyRedEnvelope",appname:"JDReactMyRedEnvelope",ishidden:!0,fromName:2,needLogin:!0},url:"https://wqs.jd.com/my/redpacket.shtml"})},e.toRealName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.href;location.href="https://idt.jd.com/realname-face?businessReturnUrl=".concat(encodeURIComponent(e))},e.toSeckillChannel=function(){mt({openAppParams:{category:"jump",des:"seckill"},url:"https://wqs.jd.com/portal/wx/seckill_m/index.shtml"})},e.toShop=function(e){e?Ve("mp")&&pt?pt.goto(pt.urls.shop+"?shopId="+e):mt({openAppParams:{category:"jump",des:"jshopMain",shopId:e},url:"https://shop.m.jd.com/?shopId=".concat(e)}):console.log("缺少店铺shopId")},e.toSku=function(e){e?Ve("mp")&&pt?pt.goto(pt.urls.detail+"?sku="+e):mt({openAppParams:{category:"jump",des:"productDetail",skuId:e},url:"https://item.m.jd.com/ware/view.action?wareId=".concat(e)}):console.log("缺少商品skuId")},e.toUrl=mt,e.togglePageBounces=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","registerCode"],n)&&!1!==rt("jd","10.2.6",n))if(ze()){if(!1===tt({ios:"webkit.messageHandlers.JDAppUnite.postMessage",android:"JDAppUnite.callRouterModuleWithParams"},n))return;var r=Ze("togglePageBounces");window[r]=function(e){var i;try{i=JSON.parse(e),t(i)}catch(t){n({status:"-100",msg:"bridge result JSON parse error",data:e})}delete window[r]};var i={routerURL:"router://JDBWebViewUtilsModule/bounces",routerParam:{bounces:"".concat(e)},callBackName:r};window.webkit.messageHandlers.JDAppUnite.postMessage({method:"callSyncRouterModuleWithParams",params:JSON.stringify(i)})}else if($e())return n({status:"-100",msg:"Android端无该方法"})}))},e.validateMoney=function(e,t,n){try{if(!_e(t)||!_e(n))return!1;var r=0;if("string"==typeof e){if(!/(^[-0-9][0-9]*(.[0-9]+)?)$/.test(e))return!1;r=parseFloat(e)}else r=e;return r>=t&&r<=n}catch(e){return!1}},e.version=function(e){var t=e.split(".");return{full:e,major:parseInt(t[0],10),minor:parseInt(t[1],10),patch:parseInt(t[2],10),build:t[3]?parseInt(t[3],10):null}},e.versionCompare=Ye,e.xviewClose=function(){return new Promise((function(e,t){if(!1!==nt(["jd","xview","registerCode"],t)){var n={ios:"webkit.messageHandlers.XView.postMessage",android:"XView.close"};if(!1!==tt(n,t))return ze()?(window.webkit.messageHandlers.XView.postMessage({method:"close"}),e({status:"0000",msg:"JSBridge[IOS] 已执行: ".concat(n.ios)})):$e()?(window.XView.close(),e({status:"0000",msg:"JSBridge[Android] 已执行: ".concat(n.android)})):void 0}}))},e.xviewConfig=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","xview","registerCode"],n)){var r={ios:"webkit.messageHandlers.XView.postMessage",android:"XView.configXView"};if(!1!==tt(r,n))return ze()?(window.webkit.messageHandlers.XView.postMessage({method:"configXView",params:JSON.stringify(e)}),t({status:"0000",msg:"JSBridge[IOS] 已执行: ".concat(r.ios)})):$e()?(window.XView.configXView(JSON.stringify(e)),t({status:"0000",msg:"JSBridge[Android] 已执行: ".concat(r.android)})):void 0}}))},e.xviewNotify=function(e){return new Promise((function(t,n){if(!1!==nt(["jd","xview","registerCode"],n)){if(!Ue(e))return n({status:"-100",msg:"参数错误"});var r;try{return r=JSON.stringify(e),window.location.href="xview://search?request=".concat(encodeURIComponent(r)),t({status:"0000",msg:"shema[xview] 已执行: ".concat(r)})}catch(e){return n({status:"-100",msg:"参数错误: ".concat(r)})}}}))},Object.defineProperty(e,"__esModule",{value:!0})}));
