/*! Web前端监控; 3.2.0; 1709200530068; */var WIN=window,SgmWebSdkIndex=function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var h=function(){function t(){r(this,t),this.RequestIdleCallback()}return i(t,[{key:"RequestIdleCallback",value:function(){var t=WIN,e="requestIdleCallback",n=function(n){document.hidden||(t[e]?t[e](n):n())},r="__sgm__"+e;t[r]||(t[r]=function(e,r){r&&document.hidden?setTimeout((function(){var o=t.performance&&t.performance.getEntriesByName&&t.performance.getEntriesByName(r)||[],i=o[o.length-1];n((function(){e(i)}))})):n((function(){e()}))})}}]),t}();function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.location,n=e.origin,r=e.protocol,o=e.host,i=e.hostname,a=e.port;return 0===t.indexOf("http")||0===t.indexOf("file:")||0===t.indexOf("data:")?t:0===t.indexOf("//")?r+t:(n||"".concat(r,"//").concat(o||i+(a?":".concat(a):"")))+(0===t.indexOf("/")?t:"/".concat(t))}function l(){var t=document.location,e=t.origin,n=t.protocol,r=t.host,o=t.hostname,i=t.port;return e||"".concat(n,"//").concat(r||o+(i?":".concat(i):""))}function p(t){if(t){var e={js:["js"],css:["css"],img:["jpg","jpeg","png","gif","ico","svg","avif","apng","webp"],other:["woff","woff2","eot","ttf","otf","json","htm","html","txt","pdf","md","mp3","mp4","mov","ogg","webm"]};try{t=f(t);var n=new URL(t).pathname,r=n.lastIndexOf(".");if(r>1){var o=n.substring(r+1).toLowerCase(),i=Object.keys(e).find((function(t){return e[t].includes(o)}));if(i)return{type:i,href:t,extName:o}}}catch(t){}}}function d(t){if(!t)return!1;if(/^((http|https):)?\/\//.test(t)){var e=c(t.split("/"),3),n=e[0],r=e[2],o=document.location,i=o.origin,a=o.protocol,s=o.host,u=o.hostname,h=o.port;return(i||"".concat(a,"//").concat(s||u+(h?":".concat(h):"")))==="".concat(n||a,"//").concat(r)}return!0}function v(){return"function"==typeof Date.now?Date.now():(new Date).getTime()}function g(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=null==(t=WIN.__sgm__)?void 0:t.timeOrigin;if(n)return n+e;var r=WIN,o=r.performance;if(o){if(o.timeOrigin)return o.timeOrigin+e;if(o.timing&&o.timing.navigationStart)return o.timing.navigationStart+e}return v()}function m(t){if(void 0===t){var e=WIN.performance;return e&&"function"==typeof e.now?g(e.now()):v()}return g(t)}function y(){try{return window&&void 0!==window.crypto&&window.crypto.getRandomValues?+([1e3].toString()+-1e3+-4e3+-8e3+-1e6).replace(/[018]/g,(function(t){return(t^window.crypto.getRandomValues(new window.Uint8Array(1))[0]&15>>t/4).toString()})).replace(/-/g,"").substring(0,18):+"xxx-xxx-4xxx-yxxx-xxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString()})).replace(/-/g,"").substring(0,18)}catch(t){}return 0}!function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase())}();var b=function(){function t(){r(this,t),this.pathInfo={newURL:document.location.href,oldURL:document.referrer,eventType:""},this.actionFn=function(t){},this.setAction(),this.pathStateChange()}return i(t,[{key:"setAction",value:function(){var e,n=this;["scroll","click","touchstart","mouseover","mousedown","keydown"].forEach((function(r){document.addEventListener(r,(function(o){if("scroll"===r){t.scrollInfo.soy=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,t.scrollInfo.soy>t.scrollInfo.som&&(t.scrollInfo.som=t.scrollInfo.soy);var i=(a=document,s=a.body,c=a.documentElement,Math.max(s?s.scrollHeight:0,s?s.offsetHeight:0,c.clientHeight,c.scrollHeight,c.offsetHeight)-(window.innerHeight||document.documentElement.clientHeight));t.scrollInfo.rat=+(t.scrollInfo.soy/i).toFixed(2),t.scrollInfo.ram=+(t.scrollInfo.som/i).toFixed(2)}else t.lastEvent=o,"click"===o.type?n.actionFn(o):"keydown"===o.type&&(clearTimeout(e),e=setTimeout((function(){n.actionFn(o)}),500));var a,s,c}),{capture:!0,passive:!0})}))}},{key:"pathStateChange",value:function(){var t=this,e=function(t,e){return!(!e||"string"!=typeof e||e===t)&&(t=t.replace(/\?.*$/,"").replace(/#.*$/,""))!==(e=e.replace(/\?.*$/,"").replace(/#.*$/,""))},n=function(e,n){t.pathInfo=n;try{var r;window.CustomEvent?r=new CustomEvent(e,{detail:n}):((r=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),r.detail=n),window.dispatchEvent(r)}catch(t){}};["pushState","replaceState"].forEach((function(t){var r=window.history[t];"function"==typeof r&&(window.history[t]=function(){try{var o=arguments[2];if(o){/^((http|https):)?\/\//.test(o)||(o=l()+(0!==o.indexOf("/")?"/".concat(o):o));var i=document.location.href;e(i,o)&&n("pathchange",{oldURL:i,newURL:o,eventType:t.replace("State",""),name:arguments[2]})}}catch(t){}return r.apply(this,arguments)},history[t].toString="sgm custom: ".concat(t,"() { [native code] }"))})),window.addEventListener("hashchange",(function(t){var e=t.newURL,r=t.oldURL;n("pathchange",{oldURL:r,newURL:e,eventType:"hash",name:e})}),!0)}},{key:"getURL",value:function(){var t=this.pathInfo,e=t.newURL,n=void 0===e?document.location.href:e,r=t.oldURL;return{pageUrl:n,referrer:(void 0===r?document.referrer:r)||void 0}}},{key:"getEvent",value:function(n){var r;try{t.lastEventList.push({key:n,lastEvent:t.lastEvent}),t.lastEventList.length>10&&t.lastEventList.shift();for(var o=null,i=0;i<t.lastEventList.length;i++)if(t.lastEventList[i].key===n){o=t.lastEventList[i];break}var a=null!=(r=null==o?void 0:o.lastEvent)?r:t.lastEvent;if(a){var s=a;a={type:s.type,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,target:s.target}}return e({key:n,time:m(),scrollInfo:e({},t.scrollInfo),lastEvent:a,activeElement:document.activeElement},this.getURL())}catch(t){}return{}}}],[{key:"getInstance",value:function(){return void 0===this.info&&(this.info=new t),this.info}}]),t}(),E=b;E.lastEventList=[],E.scrollInfo={soy:0,som:0,rat:0,ram:0};var w={prefix:"__sgm__",isEncrypt:!0},k=function(t){try{var e=function(t){return window[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"localStorage"].getItem(t)}(I(t))||"";return JSON.parse(w.isEncrypt?S(e):e).value||{}}catch(t){return{}}},I=function(t){var e,n,r,o=null!=(e=null==w?void 0:w.prefix)?e:"";return(null!=(r=null==(n=WIN[o])?void 0:n.id)?r:"")+o+t},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return decodeURIComponent(atob(t))},x=["_args_"],O=["globStatus"],_="__sgm__",L=_+"requestIdleCallback",N=E.getInstance(),T=function(){function t(e,n,o){r(this,t);try{this.XHR(e,n,o),this.Fetch(e,n,o)}catch(t){e.sdkError(t)}}return i(t,[{key:"Fetch",value:function(n,r,o){function i(t){if(t[0]instanceof WIN.Request){var e=t[0];return[e.url,e.headers]}var n=c(t,2),r=n[0],o=n[1],i=void 0===o?{}:o;return i.headers||(i.headers={}),[r,i.headers]}var a=WIN.__sgm__oldFetch=WIN.fetch;WIN.fetch=function(){var s=arguments;try{var u,h=y(),f=N.getEvent(h),l=i(arguments),d=c(l,2),v=d[0],g=d[1],m=p(v);m||(u=t.appendRequestHeader.call(this,h,v,n.openTrace,g));var b=function(t,n){try{var i="fetch";m?t.ok||o&&o.push(i,t.status,t,m.href,f):r&&r.push(t,e(e({url:v},f),{},{requestType:i,args:n,trace:u}))}catch(t){}},E=a.apply(this,arguments).then((function(t){var e={};try{e=t.clone()}catch(n){e=t}return b(e,s),t})).catch((function(t){if(b(t,s),t.stack){var e=t.stack.split("\n");if(e.length){for(var n=e.length-1;n>0;n--)if(-1!==e[n].indexOf("/sgm-web-")){e.splice(1,n);break}t.stack=e.join("\n")}}throw t}));return E}catch(t){n.sdkError(t)}return a.apply(this,arguments)}}},{key:"XHR",value:function(n,r,o){var i=WIN.XMLHttpRequest,a=i.prototype.__sgm__oldXHROpen=i.prototype.open;i.prototype.open=function(t,r,o,i,c){try{this._args_={method:t,url:r,async:o,username:i,password:c,eve:N.getEvent(y())},Object&&Object.defineProperty?Object.defineProperty(this,"_args_",{enumerable:!1}):this.toJSON=function(){this._args_;return e({},s(this,x))}}catch(t){n.sdkError(t)}return a.apply(this,arguments)};var c=i.prototype.__sgm__oldXHRSend=i.prototype.send;i.prototype.send=function(i){var a=this;try{var s,u=this._args_,h=u.url,f=u.method,l=u.eve,d=p(h);d||(s=t.appendRequestHeader.call(this,l.key,h,n.openTrace));var v=function(t){try{var a="xmlhttprequest";if(d){var c=(t.target||{}).status;(c<200||c>299)&&o&&o.push(a,c,t,d.href,l)}else r&&r.push(t,e(e({url:h,body:i,method:f},l),{},{requestType:a,trace:s}))}catch(t){n.sdkError(t)}};["load","error","abort","timeout"].forEach((function(t){a.addEventListener(t,v)}))}catch(t){n.sdkError(t)}return c.apply(this,arguments)}}}],[{key:"appendRequestHeader",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e)try{var o,i,a,s=f(e),c=k("config")||{},u=c.corsTraceRule,h=void 0===u?{}:u,l={"Sgm-Context":"".concat(t,";").concat(t)},p=n.split(","),v=Object.keys(h).find((function(t){return t&&new RegExp(t).test(s)}));if(v){a=h[v];var g=WIN[_].trace[a];g&&g.preTrace&&(o=g.preTrace(t))&&o.header&&o.id&&(l=o.header,i=g.postTrace)}if(d(s)||-1!=p.indexOf(a)){for(var m in l){var y=l[m];this instanceof WIN.XMLHttpRequest?this.setRequestHeader(m,y):r instanceof WIN.Headers?r.append(m,y):r[m]=y}return{preR:o,post:i,traceName:a}}}catch(t){}}}]),t}(),R=function(){function t(n){r(this,t),this.app=n;var o=this;WIN[_].api=function(t,r){var i=t.url,a=t.status,s=t.method,c=void 0===s?"GET":s,u=t.requestBody,h=t.responseData,f=t.requestType,l=void 0===f?"script":f,p=t.code,d=t.msg;try{if(i&&void 0!==a){var v=N.getEvent(y());h||(h={},d&&(h.msg=d),p&&(h.code=p)),o.push(new WIN.Event("manual"),e(e({ap:r},v),{},{requestType:l,args:{url:i,status:a,method:c,requestBody:u,responseData:h}}))}}catch(t){n.sdkError(t)}}}return i(t,[{key:"push",value:function(t,n){try{var r=this.app;WIN[L]((function(o){if(r&&r.getStatus("api"))if(n.timing=o,"fetch"===(n=r.appendURL(n)).requestType)if(t instanceof WIN.Error){var i=new WIN.Event("fetchError");i.url=n.url,i.status=0,i.statusText="error",i._extend_=e(e({},n),{},{requestStatus:"error"}),r.apiStorage.push(i)}else{t._extend_=e(e({},n),{},{requestStatus:"load"});try{t.clone().text().then((function(e){t._extend_.responseText=e,r.apiStorage.push(t)}))}catch(e){r.apiStorage.push(t)}}else t._extend_=n,r.apiStorage.push(t)}),n.url)}catch(t){this.app.sdkError(t)}}}]),t}(),W=function(){function t(e,n){var o=this;r(this,t),WIN[_].error=function(n,r){n&&t.storagePush({app:e,entry:n,mode:1,ap:r})};var i=function(r){return function(i){o.resourceError(i,n)&&t.storagePush({app:e,entry:i,type:r})}};WIN.addEventListener("error",i(),!0),WIN.addEventListener("unhandledrejection",i("promise"),!0)}return i(t,[{key:"resourceError",value:function(t,e){var n=t.target,r=t.reason;return t&&WIN.Event===t.constructor&&n&&(n.src||n.href)?(e&&e.push(n.tagName,0,t,n.src||n.href),!1):!r||!r.initiatorType}}],[{key:"storagePush",value:function(t){var r=t.app,o=t.entry,i=t.mode,a=t.type,s=t.ap;try{var c=N.getEvent(y());WIN[L]((function(){r&&r.getStatus("error")&&o&&"object"===n(o)&&(o._extend_=e({ap:s,mode:i},r.appendURL(c)),o._t_=a,r.errorStorage.push(o))}))}catch(t){}}}]),t}(),j=function(){function t(e){var n=this;r(this,t),this.app=e;try{WIN.PerformanceResourceTiming&&WIN.PerformanceObserver&&new WIN.PerformanceObserver((function(t){t.getEntries().forEach((function(t){n.storagePush(t)}))})).observe({type:"resource",buffered:!0})}catch(t){e.sdkError(t)}}return i(t,[{key:"push",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;try{n&&(n.name=r,n.stu=e,n.initiatorType=t.toLowerCase(),this.storagePush(n,o))}catch(t){this.app.sdkError(t)}}},{key:"storagePush",value:function(t,e){var n=this,r=e||N.getEvent(y());WIN[L]((function(){n.app.getStatus("resource")&&t&&(-1!==["script","link","css","img"].indexOf(t.initiatorType)||p(t.name))&&(t._extend_=n.app.appendURL(r),n.app.resourceStorage.push(t))}))}}]),t}(),P=i((function t(o){r(this,t),WIN[_].custom=function(t,r){var i=t.type,a=void 0===i?1:i,s=t.code,c=t.msg,u=t.cost1,h=void 0===u?0:u,f=t.cost2,l=void 0===f?0:f,p=t.cost3,d=void 0===p?0:p,v=t.cost4,g=void 0===v?0:v,m=t.startTime;if(c)try{var b=N.getEvent(y());WIN[L]((function(){o.getStatus("custom")&&("object"===n(c)&&(c=JSON.stringify(c)),o.customStorage.push(e(e({},b),{},{ap:r,type:a,code:s,msg:c,cost1:h,cost2:l,cost3:d,cost4:g,startTime:m})))}))}catch(t){o.sdkError(t)}};try{new PerformanceObserver((function(t){t.getEntries().forEach((function(t){var e=t.toJSON(),n=e.identifier,r=e.startTime,o=e.renderTime,i=e.loadTime,a=e.name,s=e.url;n&&WIN[_].custom({type:-1,code:n,msg:{name:a,url:s,startTime:r,renderTime:o,loadTime:i},startTime:r})}))})).observe({type:"element",buffered:!0})}catch(t){o.sdkError(t)}})),U=function(){function t(e){var n=this;r(this,t),WIN.addEventListener("beforeunload",(function(){n.onePush(e)}),!0),WIN.addEventListener("pagehide",(function(){n.onePush(e)}),!0),document.addEventListener("visibilitychange",(function(){document.hidden&&n.onePush(e)}),!0),WIN.addEventListener("pathchange",(function(t){var r;n.push(e,null!=(r=null==t?void 0:t.detail)?r:{})}),!0),this.generateFmp(e)}return i(t,[{key:"generateFmp",value:function(e){var n,r=m(),o=[],i=this;function a(t,e,n){var r=0,o=t.tagName;if("SCRIPT"!==o&&"STYLE"!==o&&"META"!==o&&"HEAD"!==o){var i=t.children?t.children.length:0;if(i>0)for(var s=t.children,c=i-1;c>=0;c--)r+=a(s[c],e+1,r>0);if(r<=0&&!n)if(((t.getBoundingClientRect&&t.getBoundingClientRect()||{}).top||0)>(WIN.innerHeight||0))return 0;r+=1+.5*e}return r}WIN.MutationObserver&&(n=new WIN.MutationObserver((function(){try{var i=m()-r,s=document.body;if(s){var c=a(s,1,!1);o.push({score:c,time:i})}else o.push({score:0,time:i});"complete"===document.readyState&&(t.Fmp=function(t){t=function t(e){for(var n=1;n<e.length;n++)if(e[n].score<e[n-1].score)return e.splice(n,1),t(e);return e}(t);var e=null;if(1===t.length)e={time:t[0].time};else for(var n=1;n<t.length;n++)if(t[n].time>=t[n-1].time){var r=t[n].score-t[n-1].score;(!e||e.rate<=r)&&(e={time:t[n].time,rate:r})}return null==e?void 0:e.time}(o))}catch(t){n&&n.disconnect(),n=null,e.sdkError(t)}}))).observe(document,{childList:!0,subtree:!0}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;setTimeout((function(){n&&n.disconnect(),n=null,i.onePush(e)}),t)}()}},{key:"onePush",value:function(e){t.IsPush||(t.IsPush=!0,this.push(e))}},{key:"push",value:function(n,r){try{if(n&&n.getStatus("page")){var o=N.getEvent(y());r||(o.pageUrl=t.FirstPage),n.pageStorage.push(e({fmp:t.Fmp,detail:r},o))}}catch(t){n.sdkError(t)}}}]),t}(),H=U;H.FirstPage=document.location.href;var q=function(){function t(e){var n=this;r(this,t),this.app=e;try{WIN.PerformanceLongTaskTiming&&new WIN.PerformanceObserver((function(t){t.getEntries().forEach((function(t){n.push(t)}))})).observe({type:"longtask",buffered:!0})}catch(t){e.sdkError(t)}}return i(t,[{key:"push",value:function(t){var e=this,n=N.getEvent(y());WIN[L]((function(){e.app.getStatus("longTask")&&t&&(t._extend_=e.app.appendURL(n),e.app.longTaskStorage.push(t))}))}}]),t}(),C=function(){function t(e){r(this,t),this.app=e;try{N.actionFn=this.push.bind(this)}catch(t){e.sdkError(t)}}return i(t,[{key:"push",value:function(t){var e=this,n=N.getEvent(y());WIN[L]((function(){e.app.getStatus("action")&&t&&(t._extend_=e.app.appendURL(n),e.app.actionStorage.push(t))}))}}]),t}(),A=function(){function t(e,n,o,i,a,s,c,u,f){r(this,t),this.maxMessageLength=256,this.apiStorage=[],this.errorStorage=[],this.resourceStorage=[],this.customStorage=[],this.pageStorage=[],this.longTaskStorage=[],this.actionStorage=[],this.sid=e,this.appKey=n,this.sdkName=o,this.origin=i,this.userKeys=a,this.initDomain=s,this.screenshot=c,this.openTrace=u,this.record=f,WIN[_]={id:n,api:function(){},error:function(){},custom:function(){},timeOrigin:g(),onLaunch:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;void 0!==this.onLaunch.type?t(this.onLaunch.type):(this.onLaunch.callbacks||(this.onLaunch.callbacks=[]),this.onLaunch.callbacks.push(t),setTimeout((function(){void 0===e.onLaunch.type&&(e.onLaunch.type=0,e.onLaunch.callbacks.forEach((function(t){return t(0)})))}),n))},trace:{PFINDER:{preTrace:function(t){return{header:{"X-MLAAS-AT":"wl=0&id=".concat(t,"&src=sgm-web")},id:t}},postTrace:function(t,e){var n="X-MLAAS-AT",r=e.getResponseHeader(n);if(r)return{name:"".concat(n,":").concat(r),id:new URLSearchParams(r).get("id")}}}}};try{if(e&&n&&o){var l,p;WIN[_+n]=this;try{new h}catch(t){this.sdkError(t)}try{l=new R(this)}catch(t){this.sdkError(t)}try{p=new j(this)}catch(t){this.sdkError(t)}try{new H(this)}catch(t){this.sdkError(t)}try{new P(this)}catch(t){this.sdkError(t)}try{new W(this,p)}catch(t){}try{new T(this,l,p)}catch(t){this.sdkError(t)}try{new q(this)}catch(t){this.sdkError(t)}try{new C(this)}catch(t){this.sdkError(t)}i&&this.appendScript()}}catch(t){}}return i(t,[{key:"sdkError",value:function(t){t&&"object"===n(t)&&W.storagePush({app:this,entry:t,mode:1,ap:"sgm-js"})}},{key:"getStatus",value:function(t){var e,n=k("config")||{},r=n.globStatus,o=void 0===r||r,i=s(n,O),a=o&&(null==(e=i[t+"Status"])||e),c=this[t+"Storage"]||[];return a&&c.length<this.maxMessageLength}},{key:"appendURL",value:function(t){var e=N.getURL(),n=e.pageUrl,r=e.referrer;return Object.assign(t,{pageUrl:n,referrer:r})}},{key:"appendScript",value:function(){var t=this,e=function(e){var n=document.createElement("script");return n.async=!0,n.crossOrigin="anonymous",n.src="".concat(t.origin,"/sgm-web-").concat(e,"-","3.2.0",".js"),n},n=e("main"),r=function(t,e){n.setAttribute(t,e)};r("name",this.sdkName),r("sid",this.sid),r("pid",this.appKey),this.userKeys&&r("userKeys",this.userKeys),this.initDomain&&r("initDomain",this.initDomain),document.head&&(this.screenshot&&document.head.appendChild(e("screenshot")),this.record&&document.head.appendChild(e("record")),document.head.appendChild(n))}}]),t}(),D=document.currentScript;if(D&&!WIN[_]){var F=function(t){return D.getAttribute(t)},M=new URL(D.src).href,X=F("sid"),K=F("pid")||F("appKey"),B=F("name"),Y=F("userKeys"),$=F("initDomain"),J=null!=F("screenshot"),G=F("openTrace"),V=null!=F("record"),z=WIN[F("rcn")||"__sgm_runtime_config__"];z&&z.initDomain&&($=z.initDomain),X&&K&&B?new A(X,K,B,M.substring(0,M.lastIndexOf("/")),Y,$,J,G,V):WIN.console.warn("格式有误,正确格式:",'<script crossOrigin src="https://sgm-static.jd.com/sgm-x.x.x.js" name="SGMH5" sid="xxx" pid="xxx"/>')}return A}();
